<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ActiveRecord::Callbacks</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Module</span> 
            ActiveRecord::Callbacks 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/activerecord/lib/active_record/callbacks_rb.html">activerecord/lib/active_record/callbacks.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p><a href="Callbacks.html">Callbacks</a> are hooks into the lifecycle of an
Active Record object that allow you to trigger logic before or after an
alteration of the object state. This can be used to make sure that
associated and dependent objects are deleted when <code>destroy</code> is
called (by overwriting <code>before_destroy</code>) or to massage
attributes before they&#39;re validated (by overwriting
<code>before_validation</code>). As an example of the callbacks initiated,
consider the <code>Base#save</code> call for a new record:</p>
<ul><li>
<p>(-) <code>save</code></p>
</li><li>
<p>(-) <code>valid</code></p>
</li><li>
<p>(1) <code>before_validation</code></p>
</li><li>
<p>(2) <code>before_validation_on_create</code></p>
</li><li>
<p>(-) <code>validate</code></p>
</li><li>
<p>(-) <code>validate_on_create</code></p>
</li><li>
<p>(3) <code>after_validation</code></p>
</li><li>
<p>(4) <code>after_validation_on_create</code></p>
</li><li>
<p>(5) <code>before_save</code></p>
</li><li>
<p>(6) <code>before_create</code></p>
</li><li>
<p>(-) <code>create</code></p>
</li><li>
<p>(7) <code>after_create</code></p>
</li><li>
<p>(8) <code>after_save</code></p>
</li></ul>

<p>That&#39;s a total of eight callbacks, which gives you immense power to
react and prepare for each state in the Active Record lifecycle. The
sequence for calling <code>Base#save</code> an existing record is similar,
except that each  <code>_on_create</code> callback is replaced by the
corresponding <code>_on_update</code> callback.</p>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">CreditCard</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-comment"># Strip everything but digits, so the user can specify &quot;555 234 34&quot; or</span>
  <span class="ruby-comment"># &quot;5552-3434&quot; or both will mean &quot;55523434&quot;</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">before_validation_on_create</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">number</span> = <span class="ruby-identifier">number</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/[^0-9]/</span>, <span class="ruby-string">&quot;&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">attribute_present?</span>(<span class="ruby-string">&quot;number&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">Subscription</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">before_create</span> :<span class="ruby-identifier">record_signup</span>

  <span class="ruby-identifier">private</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">record_signup</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">signed_up_on</span> = <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">Firm</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-comment"># Destroys the associated clients and people when the firm is destroyed</span>
  <span class="ruby-identifier">before_destroy</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span> <span class="ruby-constant">Person</span>.<span class="ruby-identifier">destroy_all</span> <span class="ruby-node">&quot;firm_id = #{record.id}&quot;</span>   }
  <span class="ruby-identifier">before_destroy</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span> <span class="ruby-constant">Client</span>.<span class="ruby-identifier">destroy_all</span> <span class="ruby-node">&quot;client_of = #{record.id}&quot;</span> }
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Inheritable+callback+queues">Inheritable callback queues</h2>

<p>Besides the overwritable callback methods, it&#39;s also possible to
register callbacks through the use of the callback macros. Their main
advantage is that the macros add behavior into a callback queue that is
kept intact down through an inheritance hierarchy. Example:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Topic</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">before_destroy</span> :<span class="ruby-identifier">destroy_author</span>
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">Reply</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Topic</span>
  <span class="ruby-identifier">before_destroy</span> :<span class="ruby-identifier">destroy_readers</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Now, when <code>Topic#destroy</code> is run only
<code>destroy_author</code> is called. When <code>Reply#destroy</code> is
run, both <code>destroy_author</code> and <code>destroy_readers</code> are
called. Contrast this to the situation where we&#39;ve implemented the save
behavior through overwriteable methods:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Topic</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">before_destroy</span>() <span class="ruby-identifier">destroy_author</span> <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">Reply</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Topic</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">before_destroy</span>() <span class="ruby-identifier">destroy_readers</span> <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>In that case, <code>Reply#destroy</code> would only run
<code>destroy_readers</code> and <em>not</em> <code>destroy_author</code>.
So, use the callback macros when you want to ensure that a certain callback
is called for the entire hierarchy, and use the regular overwriteable
methods when you want to leave it up to each descendant to decide whether
they want to call <code>super</code> and trigger the inherited callbacks.</p>

<p><strong>IMPORTANT:</strong> In order for inheritance to work for the
callback queues, you must specify the callbacks before specifying the
associations. Otherwise, you might trigger the loading of a child before
the parent has registered the callbacks and they won&#39;t be inherited.</p>

<h2 id="label-Types+of+callbacks">Types of callbacks</h2>

<p>There are four types of callbacks accepted by the callback macros: Method
references (symbol), callback objects, inline methods (using a proc), and
inline eval methods (using a string). Method references and callback
objects are the recommended approaches, inline methods using a proc are
sometimes appropriate (such as for creating mix-ins), and inline eval
methods are deprecated.</p>

<p>The method reference callbacks work by specifying a protected or private
method available in the object, like this:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Topic</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">before_destroy</span> :<span class="ruby-identifier">delete_parents</span>

  <span class="ruby-identifier">private</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">delete_parents</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">delete_all</span> <span class="ruby-node">&quot;parent_id = #{id}&quot;</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>The callback objects have methods named after the callback called with the
record as the only parameter, such as:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">BankAccount</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">before_save</span>      <span class="ruby-constant">EncryptionWrapper</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">after_save</span>       <span class="ruby-constant">EncryptionWrapper</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">after_initialize</span> <span class="ruby-constant">EncryptionWrapper</span>.<span class="ruby-identifier">new</span>
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">EncryptionWrapper</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">before_save</span>(<span class="ruby-identifier">record</span>)
    <span class="ruby-identifier">record</span>.<span class="ruby-identifier">credit_card_number</span> = <span class="ruby-identifier">encrypt</span>(<span class="ruby-identifier">record</span>.<span class="ruby-identifier">credit_card_number</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">after_save</span>(<span class="ruby-identifier">record</span>)
    <span class="ruby-identifier">record</span>.<span class="ruby-identifier">credit_card_number</span> = <span class="ruby-identifier">decrypt</span>(<span class="ruby-identifier">record</span>.<span class="ruby-identifier">credit_card_number</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">alias_method</span> :<span class="ruby-identifier">after_find</span>, :<span class="ruby-identifier">after_save</span>

  <span class="ruby-identifier">private</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">encrypt</span>(<span class="ruby-identifier">value</span>)
      <span class="ruby-comment"># Secrecy is committed</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">decrypt</span>(<span class="ruby-identifier">value</span>)
      <span class="ruby-comment"># Secrecy is unveiled</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>So you specify the object you want messaged on a given callback. When that
callback is triggered, the object has a method by the name of the callback
messaged. You can make these callbacks more flexible by passing in other
initialization data such as the name of the attribute to work with:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">BankAccount</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">before_save</span>      <span class="ruby-constant">EncryptionWrapper</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;credit_card_number&quot;</span>)
  <span class="ruby-identifier">after_save</span>       <span class="ruby-constant">EncryptionWrapper</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;credit_card_number&quot;</span>)
  <span class="ruby-identifier">after_initialize</span> <span class="ruby-constant">EncryptionWrapper</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;credit_card_number&quot;</span>)
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">EncryptionWrapper</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">attribute</span>)
    <span class="ruby-ivar">@attribute</span> = <span class="ruby-identifier">attribute</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">before_save</span>(<span class="ruby-identifier">record</span>)
    <span class="ruby-identifier">record</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{@attribute}=&quot;</span>, <span class="ruby-identifier">encrypt</span>(<span class="ruby-identifier">record</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{@attribute}&quot;</span>)))
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">after_save</span>(<span class="ruby-identifier">record</span>)
    <span class="ruby-identifier">record</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{@attribute}=&quot;</span>, <span class="ruby-identifier">decrypt</span>(<span class="ruby-identifier">record</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{@attribute}&quot;</span>)))
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">alias_method</span> :<span class="ruby-identifier">after_find</span>, :<span class="ruby-identifier">after_save</span>

  <span class="ruby-identifier">private</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">encrypt</span>(<span class="ruby-identifier">value</span>)
      <span class="ruby-comment"># Secrecy is committed</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">decrypt</span>(<span class="ruby-identifier">value</span>)
      <span class="ruby-comment"># Secrecy is unveiled</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>The callback macros usually accept a symbol for the method they&#39;re
supposed to run, but you can also pass a “method string”, which will then
be evaluated within the binding of the callback. Example:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Topic</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">before_destroy</span> <span class="ruby-string">&#39;self.class.delete_all &quot;parent_id = #{id}&quot;&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Notice that single quotes (&#39;) are used so the <code>#{id}</code> part
isn&#39;t evaluated until the callback is triggered. Also note that these
inline callbacks can be stacked just like the regular ones:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Topic</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">before_destroy</span> <span class="ruby-string">&#39;self.class.delete_all &quot;parent_id = #{id}&quot;&#39;</span>,
                 <span class="ruby-string">&#39;puts &quot;Evaluated after parents are destroyed&quot;&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-The+after_find+and+after_initialize+exceptions">The <code>after_find</code> and <code>after_initialize</code> exceptions</h2>

<p>Because <code>after_find</code> and <code>after_initialize</code> are
called for each object found and instantiated by a finder, such as
<code>Base.find(:all)</code>, we&#39;ve had to implement a simple
performance constraint (50% more speed on a simple test case). Unlike all
the other callbacks, <code>after_find</code> and
<code>after_initialize</code> will only be run if an explicit
implementation is defined (<code>def after_find</code>). In that case, all
of the callback types will be called.</p>

<h2 id="label-before_validation%2A+returning+statements"><code>before_validation*</code> returning statements</h2>

<p>If the returning value of a <code>before_validation</code> callback can be
evaluated to <code>false</code>, the process will be aborted and
<code>Base#save</code> will return <code>false</code>. If <a
href="Base.html#method-i-save-21">ActiveRecord::Base#save!</a> is called it
will raise a <a href="RecordInvalid.html">ActiveRecord::RecordInvalid</a>
exception. Nothing will be appended to the errors object.</p>

<h2 id="label-Canceling+callbacks">Canceling callbacks</h2>

<p>If a <code>before_*</code> callback returns <code>false</code>, all the
later callbacks and the associated action are cancelled. If an
<code>after_*</code> callback returns <code>false</code>, all the later
callbacks are cancelled. <a href="Callbacks.html">Callbacks</a> are
generally run in the order they are defined, with the exception of
callbacks defined as methods on the model, which are called last.</p>

<h2 id="label-Transactions"><a href="Transactions.html">Transactions</a></h2>

<p>The entire callback chain of a <code>save</code>, <code>save!</code>, or
<code>destroy</code> call runs within a transaction. That includes
<code>after_*</code> hooks. If everything goes fine a COMMIT is executed
once the chain has been completed.</p>

<p>If a <code>before_*</code> callback cancels the action a ROLLBACK is
issued. You can also trigger a ROLLBACK raising an exception in any of the
callbacks, including <code>after_*</code> hooks. Note, however, that in
that case the client needs to be aware of it because an ordinary
<code>save</code> will raise such exception instead of quietly returning
<code>false</code>.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-after_create">after_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-after_destroy">after_destroy</a>,
              </li>
            
              
              <li>
                <a href="#method-i-after_save">after_save</a>,
              </li>
            
              
              <li>
                <a href="#method-i-after_update">after_update</a>,
              </li>
            
              
              <li>
                <a href="#method-i-after_validation">after_validation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-after_validation_on_create">after_validation_on_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-after_validation_on_update">after_validation_on_update</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-before_create">before_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-before_destroy">before_destroy</a>,
              </li>
            
              
              <li>
                <a href="#method-i-before_save">before_save</a>,
              </li>
            
              
              <li>
                <a href="#method-i-before_update">before_update</a>,
              </li>
            
              
              <li>
                <a href="#method-i-before_validation">before_validation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-before_validation_on_create">before_validation_on_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-before_validation_on_update">before_validation_on_update</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">CALLBACKS</td>
            <td>=</td>
            <td class="attr-value">%w(
after_find after_initialize before_save after_save before_create after_create before_update after_update before_validation
after_validation before_validation_on_create after_validation_on_create before_validation_on_update
after_validation_on_update before_destroy after_destroy
)</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-after_create">
            
              <b>after_create</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-after_create" name="method-i-after_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>after</em> <code>Base.save</code> on new objects that
haven&#39;t been saved yet (no record exists). Note that this callback is
still wrapped in the transaction around <code>save</code>. For example, if
you invoke an external indexer at this point it won&#39;t see the changes
in the database.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-after_create_source')" id="l_method-i-after_create_source">show</a>
                
              </p>
              <div id="method-i-after_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">after_create</span>() <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-after_destroy">
            
              <b>after_destroy</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-after_destroy" name="method-i-after_destroy" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>after</em> <code>Base.destroy</code> (and all the attributes
have been frozen).</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Contact</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">after_destroy</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span> <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span>( <span class="ruby-node">&quot;Contact #{record.id} was destroyed.&quot;</span> ) }
<span class="ruby-keyword">end</span>
</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-after_destroy_source')" id="l_method-i-after_destroy_source">show</a>
                
              </p>
              <div id="method-i-after_destroy_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 334</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">after_destroy</span>()  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-after_save">
            
              <b>after_save</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-after_save" name="method-i-after_save" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>after</em> <code>Base.save</code> (regardless of whether
it&#39;s a <code>create</code> or <code>update</code> save). Note that this
callback is still wrapped in the transaction around <code>save</code>. For
example, if you invoke an external indexer at this point it won&#39;t see
the changes in the database.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Contact</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">after_save</span> { <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span>( <span class="ruby-string">&#39;New contact saved!&#39;</span> ) }
<span class="ruby-keyword">end</span>
</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-after_save_source')" id="l_method-i-after_save_source">show</a>
                
              </p>
              <div id="method-i-after_save_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 247</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">after_save</span>()  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-after_update">
            
              <b>after_update</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-after_update" name="method-i-after_update" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>after</em> <code>Base.save</code> on existing objects that
have a record. Note that this callback is still wrapped in the transaction
around <code>save</code>. For example, if you invoke an external indexer at
this point it won&#39;t see the changes in the database.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-after_update_source')" id="l_method-i-after_update_source">show</a>
                
              </p>
              <div id="method-i-after_update_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 278</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">after_update</span>() <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-after_validation">
            
              <b>after_validation</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-after_validation" name="method-i-after_validation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>after</em> <code>Validations.validate</code> (which is part
of the <code>Base.save</code> call).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-after_validation_source')" id="l_method-i-after_validation_source">show</a>
                
              </p>
              <div id="method-i-after_validation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 292</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">after_validation</span>() <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-after_validation_on_create">
            
              <b>after_validation_on_create</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-after_validation_on_create" name="method-i-after_validation_on_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>after</em> <code>Validations.validate</code> (which is part
of the <code>Base.save</code> call) on new objects that haven&#39;t been
saved yet (no record exists).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-after_validation_on_create_source')" id="l_method-i-after_validation_on_create_source">show</a>
                
              </p>
              <div id="method-i-after_validation_on_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 300</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">after_validation_on_create</span>()  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-after_validation_on_update">
            
              <b>after_validation_on_update</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-after_validation_on_update" name="method-i-after_validation_on_update" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>after</em> <code>Validations.validate</code> (which is part
of the <code>Base.save</code> call) on existing objects that have a record.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-after_validation_on_update_source')" id="l_method-i-after_validation_on_update_source">show</a>
                
              </p>
              <div id="method-i-after_validation_on_update_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 308</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">after_validation_on_update</span>()  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-before_create">
            
              <b>before_create</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-before_create" name="method-i-before_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>before</em> <code>Base.save</code> on new objects that
haven&#39;t been saved yet (no record exists).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-before_create_source')" id="l_method-i-before_create_source">show</a>
                
              </p>
              <div id="method-i-before_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 258</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">before_create</span>() <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-before_destroy">
            
              <b>before_destroy</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-before_destroy" name="method-i-before_destroy" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>before</em> <code>Base.destroy</code>.</p>

<p>Note: If you need to <em>destroy</em> or <em>nullify</em> associated
records first, use the <code>:dependent</code> option on your associations.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-before_destroy_source')" id="l_method-i-before_destroy_source">show</a>
                
              </p>
              <div id="method-i-before_destroy_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 327</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">before_destroy</span>() <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-before_save">
            
              <b>before_save</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-before_save" name="method-i-before_save" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>before</em> <code>Base.save</code> (regardless of whether
it&#39;s a <code>create</code> or <code>update</code> save).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-before_save_source')" id="l_method-i-before_save_source">show</a>
                
              </p>
              <div id="method-i-before_save_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 238</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">before_save</span>() <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-before_update">
            
              <b>before_update</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-before_update" name="method-i-before_update" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>before</em> <code>Base.save</code> on existing objects that
have a record.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-before_update_source')" id="l_method-i-before_update_source">show</a>
                
              </p>
              <div id="method-i-before_update_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 273</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">before_update</span>() <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-before_validation">
            
              <b>before_validation</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-before_validation" name="method-i-before_validation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>before</em> <code>Validations.validate</code> (which is part
of the <code>Base.save</code> call).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-before_validation_source')" id="l_method-i-before_validation_source">show</a>
                
              </p>
              <div id="method-i-before_validation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 289</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">before_validation</span>() <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-before_validation_on_create">
            
              <b>before_validation_on_create</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-before_validation_on_create" name="method-i-before_validation_on_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>before</em> <code>Validations.validate</code> (which is part
of the <code>Base.save</code> call) on new objects that haven&#39;t been
saved yet (no record exists).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-before_validation_on_create_source')" id="l_method-i-before_validation_on_create_source">show</a>
                
              </p>
              <div id="method-i-before_validation_on_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 296</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">before_validation_on_create</span>() <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-before_validation_on_update">
            
              <b>before_validation_on_update</b>()
            
            <a href="../../classes/ActiveRecord/Callbacks.html#method-i-before_validation_on_update" name="method-i-before_validation_on_update" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Is called <em>before</em> <code>Validations.validate</code> (which is part
of the <code>Base.save</code> call) on existing objects that have a record.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-before_validation_on_update_source')" id="l_method-i-before_validation_on_update_source">show</a>
                
              </p>
              <div id="method-i-before_validation_on_update_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/callbacks.rb, line 304</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">before_validation_on_update</span>() <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    