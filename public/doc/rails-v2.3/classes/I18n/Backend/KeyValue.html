<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>I18n::Backend::KeyValue</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../css/github.css" type="text/css" media="screen" />
<script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            I18n::Backend::KeyValue 
            
                <span class="parent">&lt; 
                    
                    <a href="../../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/activesupport/lib/active_support/vendor/i18n-0_4_1/i18n/backend/key_value_rb.html">activesupport/lib/active_support/vendor/i18n-0.4.1/i18n/backend/key_value.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>This is a basic backend for key value stores. It receives on initialization
the store, which should respond to three methods:</p>
<ul><li>
<p>store#[](key)         - Used to get a value</p>
</li><li>
<p>store#[]=(key, value) - Used to set a value</p>
</li><li>
<p>storekeys            - Used to get all keys</p>
</li></ul>

<p>Since these stores only supports string, all values are converted to JSON
before being stored, allowing it to also store booleans, hashes and arrays.
However, this store does not support Procs.</p>

<p>As the <a href="ActiveRecord.html">ActiveRecord</a> backend, Symbols are
just supported when loading translations from the filesystem or through
explicit store translations.</p>

<p>Also, avoid calling I18n.available_locales since it&#39;s a somehow
expensive operation in most stores.</p>

<h2 id="label-Example">Example</h2>

<p>To setup <a href="../../I18n.html">I18n</a> to use TokyoCabinet in memory
is quite straightforward:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rufus/tokyo/cabinet&#39;</span> <span class="ruby-comment"># gem install rufus-tokyo</span>
<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">backend</span> = <span class="ruby-constant">I18n</span><span class="ruby-operator">::</span><span class="ruby-constant">Backend</span><span class="ruby-operator">::</span><span class="ruby-constant">KeyValue</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Rufus</span><span class="ruby-operator">::</span><span class="ruby-constant">Tokyo</span><span class="ruby-operator">::</span><span class="ruby-constant">Cabinet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;*&#39;</span>))
</pre>

<h2 id="label-Performance">Performance</h2>

<p>You may make this backend even faster by including the <a
href="Memoize.html">Memoize</a> module. However, notice that you should
properly clear the cache if you change values directly in the key-store.</p>

<h2 id="label-Subtrees">Subtrees</h2>

<p>In most backends, you are allowed to retrieve part of a translation tree:</p>

<pre class="ruby"><span class="ruby-constant">I18n</span>.<span class="ruby-identifier">backend</span>.<span class="ruby-identifier">store_translations</span> :<span class="ruby-identifier">en</span>, :<span class="ruby-identifier">foo</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">bar</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">baz</span> }
<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span> <span class="ruby-string">&quot;foo&quot;</span> <span class="ruby-comment">#=&gt; { :bar =&gt; :baz }</span>
</pre>

<p>This backend supports this feature by default, but it slows down the
storage of new data considerably and makes hard to delete entries. That
said, you are allowed to disable the storage of subtrees on initialization:</p>

<pre>I18n::Backend::KeyValue.new(@store, false)</pre>

<p>This is useful if you are using a <a href="KeyValue.html">KeyValue</a>
backend chained to a <a href="Simple.html">Simple</a> backend.</p>

    </div>
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">MODULE</span>
          <a href="KeyValue/Implementation.html">I18n::Backend::KeyValue::Implementation</a>
        </li>
      
    </ul>
  


  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="KeyValue/Implementation.html">
              I18n::Backend::KeyValue::Implementation
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    


    


    <!-- Methods -->
              </div>

    </div>
  </body>
</html>    