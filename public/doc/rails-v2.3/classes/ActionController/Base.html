<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ActionController::Base</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            ActionController::Base 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/actionpack/lib/action_controller/base_rb.html">actionpack/lib/action_controller/base.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>Action Controllers are the core of a web request in <a
href="../Rails.html">Rails</a>. They are made up of one or more actions
that are executed on request and then either render a template or redirect
to another action. An action is defined as a public method on the
controller, which will automatically be made accessible to the web-server
through <a href="../Rails.html">Rails</a> Routes.</p>

<p>A sample controller could look like this:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">GuestBookController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">index</span>
    <span class="ruby-ivar">@entries</span> = <span class="ruby-constant">Entry</span>.<span class="ruby-identifier">find</span>(:<span class="ruby-identifier">all</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">sign</span>
    <span class="ruby-constant">Entry</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">entry</span>])
    <span class="ruby-identifier">redirect_to</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;index&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Actions, by default, render a template in the <code>app/views</code>
directory corresponding to the name of the controller and action after
executing code in the action. For example, the <code>index</code> action of
the GuestBookController would render the template
<code>app/views/guestbook/index.erb</code> by default after populating the
<code>@entries</code> instance variable.</p>

<p>Unlike index, the sign action will not render a template. After performing
its main purpose (creating a new entry in the guest book), it initiates a
redirect instead. This redirect works by returning an external “302 Moved”
HTTP response that takes the user to the index action.</p>

<p>The index and sign represent the two basic action archetypes used in Action
Controllers. Get-and-show and do-and-redirect. Most actions are variations
of these themes.</p>

<h2 id="label-Requests">Requests</h2>

<p>Requests are processed by the Action Controller framework by extracting the
value of the “action” key in the request parameters. This value should hold
the name of the action to be performed. Once the action has been
identified, the remaining request parameters, the session (if one is
available), and the full request with all the HTTP headers are made
available to the action through instance variables. Then the action is
performed.</p>

<p>The full request object is available with the request accessor and is
primarily used to query for HTTP headers. These queries are made by
accessing the environment hash, like this:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">server_ip</span>
  <span class="ruby-identifier">location</span> = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;SERVER_ADDR&quot;</span>]
  <span class="ruby-identifier">render</span> :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;This server hosted at #{location}&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Parameters">Parameters</h2>

<p>All request parameters, whether they come from a GET or POST request, or
from the URL, are available through the params method which returns a hash.
For example, an action that was performed through
<code>/weblog/list?category=All&amp;limit=5</code> will include <code>{
&quot;category&quot; =&gt; &quot;All&quot;, &quot;limit&quot; =&gt; 5
}</code> in params.</p>

<p>It&#39;s also possible to construct multi-dimensional parameter hashes by
specifying keys using brackets, such as:</p>

<pre>&lt;input type=&quot;text&quot; name=&quot;post[name]&quot; value=&quot;david&quot;&gt;
&lt;input type=&quot;text&quot; name=&quot;post[address]&quot; value=&quot;hyacintvej&quot;&gt;</pre>

<p>A request stemming from a form holding these inputs will include <code>{
&quot;post&quot; =&gt; { &quot;name&quot; =&gt; &quot;david&quot;,
&quot;address&quot; =&gt; &quot;hyacintvej&quot; } }</code>. If the address
input had been named “<a href="http://address">post</a>[street]”, the
params would have included <code>{ &quot;post&quot; =&gt; {
&quot;address&quot; =&gt; { &quot;street&quot; =&gt; &quot;hyacintvej&quot;
} } }</code>. There&#39;s no limit to the depth of the nesting.</p>

<h2 id="label-Sessions">Sessions</h2>

<p>Sessions allows you to store objects in between requests. This is useful
for objects that are not yet ready to be persisted, such as a Signup object
constructed in a multi-paged process, or objects that don&#39;t change much
and are needed all the time, such as a User object for a system that
requires login. The session should not be used, however, as a cache for
objects where it&#39;s likely they could be changed unknowingly. It&#39;s
usually too much work to keep it all synchronized – something databases
already excel at.</p>

<p>You can place objects in the session by using the <code>session</code>
method, which accesses a hash:</p>

<pre>session[:person] = Person.authenticate(user_name, password)</pre>

<p>And retrieved again through the same hash:</p>

<pre>Hello #{session[:person]}</pre>

<p>For removing objects from the session, you can either assign a single key
to <code>nil</code>:</p>

<pre># removes :person from session
session[:person] = nil</pre>

<p>or you can remove the entire session with <code>reset_session</code>.</p>

<p>Sessions are stored by default in a browser cookie that&#39;s
cryptographically signed, but unencrypted. This prevents the user from
tampering with the session but also allows him to see its contents.</p>

<p>Do not put secret information in cookie-based sessions!</p>

<p>Other options for session storage are:</p>
<ul><li>
<p><a href="../ActiveRecord/SessionStore.html">ActiveRecord::SessionStore</a>
- Sessions are stored in your database, which works better than PStore with
multiple app servers and, unlike CookieStore, hides your session contents
from the user. To use <a
href="../ActiveRecord/SessionStore.html">ActiveRecord::SessionStore</a>,
set</p>

<pre>config.action_controller.session_store = :active_record_store</pre>

<p>in your <code>config/environment.rb</code> and run <code>rake
db:sessions:create</code>.</p>
</li><li>
<p>MemCacheStore - Sessions are stored as entries in your memcached cache. Set
the session store type in <code>config/environment.rb</code>:</p>

<pre>config.action_controller.session_store = :mem_cache_store</pre>

<p>This assumes that memcached has been installed and configured properly. See
the MemCacheStore docs for more information.</p>
</li></ul>

<h2 id="label-Responses">Responses</h2>

<p>Each action results in a response, which holds the headers and document to
be sent to the user&#39;s browser. The actual response object is generated
automatically through the use of renders and redirects and requires no user
intervention.</p>

<h2 id="label-Renders">Renders</h2>

<p>Action Controller sends content to the user by using one of five rendering
methods. The most versatile and common is the rendering of a template.
Included in the Action Pack is the Action View, which enables rendering of
ERb templates. It&#39;s automatically configured. The controller passes
objects to the view by assigning instance variables:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">show</span>
  <span class="ruby-ivar">@post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">id</span>])
<span class="ruby-keyword">end</span>
</pre>

<p>Which are then automatically available to the view:</p>

<pre>Title: &lt;%= @post.title %&gt;</pre>

<p>You don&#39;t have to rely on the automated rendering. Especially actions
that could result in the rendering of different templates will use the
manual rendering methods:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">search</span>
  <span class="ruby-ivar">@results</span> = <span class="ruby-constant">Search</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">query</span>])
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@results</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">0</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">render</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;no_results&quot;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">1</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">render</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;show&quot;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-value">10</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">render</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;show_many&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Read more about writing ERb and <a href="../Builder.html">Builder</a>
templates in <a
href="../ActionView/Base.html.">classes/ActionView/Base.html.</a></p>

<h2 id="label-Redirects">Redirects</h2>

<p>Redirects are used to move from one action to another. For example, after a
<code>create</code> action, which stores a blog entry to a database, we
might like to show the user the new entry. Because we&#39;re following good
DRY principles (Don&#39;t Repeat Yourself), we&#39;re going to reuse (and
redirect to) a <code>show</code> action that we&#39;ll assume has already
been created. The code might look like this:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>
  <span class="ruby-ivar">@entry</span> = <span class="ruby-constant">Entry</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">entry</span>])
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@entry</span>.<span class="ruby-identifier">save</span>
    <span class="ruby-comment"># The entry was saved correctly, redirect to show</span>
    <span class="ruby-identifier">redirect_to</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span>, :<span class="ruby-identifier">id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@entry</span>.<span class="ruby-identifier">id</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># things didn&#39;t go so well, do something else</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>In this case, after saving our new entry to the database, the user is
redirected to the <code>show</code> method which is then executed.</p>

<h2 id="label-Calling+multiple+redirects+or+renders">Calling multiple redirects or renders</h2>

<p>An action may contain only a single render or a single redirect. Attempting
to try to do either again will result in a DoubleRenderError:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">do_something</span>
  <span class="ruby-identifier">redirect_to</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;elsewhere&quot;</span>
  <span class="ruby-identifier">render</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;overthere&quot;</span> <span class="ruby-comment"># raises DoubleRenderError</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you need to redirect on the condition of something, then be sure to add
“and return” to halt execution.</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">do_something</span>
  <span class="ruby-identifier">redirect_to</span>(:<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;elsewhere&quot;</span>) <span class="ruby-keyword">and</span> <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">monkeys</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">render</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;overthere&quot;</span> <span class="ruby-comment"># won&#39;t be called if monkeys is nil</span>
<span class="ruby-keyword">end</span>
</pre>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-append_view_path">append_view_path</a>,
              </li>
            
              
              <li>
                <a href="#method-i-append_view_path">append_view_path</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-call">call</a>,
              </li>
            
              
              <li>
                <a href="#method-i-controller_class_name">controller_class_name</a>,
              </li>
            
              
              <li>
                <a href="#method-c-controller_class_name">controller_class_name</a>,
              </li>
            
              
              <li>
                <a href="#method-c-controller_name">controller_name</a>,
              </li>
            
              
              <li>
                <a href="#method-i-controller_name">controller_name</a>,
              </li>
            
              
              <li>
                <a href="#method-c-controller_path">controller_path</a>,
              </li>
            
              
              <li>
                <a href="#method-i-controller_path">controller_path</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-default_url_options">default_url_options</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-expires_in">expires_in</a>,
              </li>
            
              
              <li>
                <a href="#method-i-expires_now">expires_now</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-filter_parameter_logging">filter_parameter_logging</a>,
              </li>
            
              
              <li>
                <a href="#method-i-fresh_when">fresh_when</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-head">head</a>,
              </li>
            
              
              <li>
                <a href="#method-c-hidden_actions">hidden_actions</a>,
              </li>
            
              
              <li>
                <a href="#method-c-hide_action">hide_action</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-prepend_view_path">prepend_view_path</a>,
              </li>
            
              
              <li>
                <a href="#method-i-prepend_view_path">prepend_view_path</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-redirect_to">redirect_to</a>,
              </li>
            
              
              <li>
                <a href="#method-i-redirect_to_full_url">redirect_to_full_url</a>,
              </li>
            
              
              <li>
                <a href="#method-i-render">render</a>,
              </li>
            
              
              <li>
                <a href="#method-i-render_to_string">render_to_string</a>,
              </li>
            
              
              <li>
                <a href="#method-i-reset_session">reset_session</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-send_response">send_response</a>,
              </li>
            
              
              <li>
                <a href="#method-i-session_enabled-3F">session_enabled?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-stale-3F">stale?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-url_for">url_for</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>V</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-view_paths">view_paths</a>,
              </li>
            
              
              <li>
                <a href="#method-c-view_paths">view_paths</a>,
              </li>
            
              
              <li>
                <a href="#method-c-view_paths-3D">view_paths=</a>,
              </li>
            
              
              <li>
                <a href="#method-i-view_paths-3D">view_paths=</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">DEFAULT_RENDER_STATUS_CODE</td>
            <td>=</td>
            <td class="attr-value">&quot;200 OK&quot;</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>action_name</td>
            <td class='attr-desc'><p>Returns the name of the action this controller is processing.</p></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-append_view_path">
            
              <b>append_view_path</b>(path)
            
            <a href="../../classes/ActionController/Base.html#method-c-append_view_path" name="method-c-append_view_path" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Adds a view_path to the end of the <a
href="Base.html#method-c-view_paths">::view_paths</a> array. If the current
class has no view paths, copy them from the superclass. This change will be
visible for all future requests.</p>

<pre>ArticleController.append_view_path(&quot;views/default&quot;)
ArticleController.append_view_path([&quot;views/default&quot;, &quot;views/custom&quot;])</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-append_view_path_source')" id="l_method-c-append_view_path_source">show</a>
                
              </p>
              <div id="method-c-append_view_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 455</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">append_view_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-ivar">@view_paths</span> = <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">view_paths</span>.<span class="ruby-identifier">dup</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@view_paths</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-ivar">@view_paths</span>.<span class="ruby-identifier">push</span>(*<span class="ruby-identifier">path</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-call">
            
              <b>call</b>(env)
            
            <a href="../../classes/ActionController/Base.html#method-c-call" name="method-c-call" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-call_source')" id="l_method-c-call_source">show</a>
                
              </p>
              <div id="method-c-call_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 382</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">call</span>(<span class="ruby-identifier">env</span>)
  <span class="ruby-comment"># HACK: For global rescue to have access to the original request and response</span>
  <span class="ruby-identifier">request</span> = <span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_controller.rescue.request&quot;</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">Request</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">response</span> = <span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_controller.rescue.response&quot;</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">Response</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">process</span>(<span class="ruby-identifier">request</span>, <span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-controller_class_name">
            
              <b>controller_class_name</b>()
            
            <a href="../../classes/ActionController/Base.html#method-c-controller_class_name" name="method-c-controller_class_name" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Converts the class name from something like
“OneModule::TwoModule::NeatController” to “NeatController”.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-controller_class_name_source')" id="l_method-c-controller_class_name_source">show</a>
                
              </p>
              <div id="method-c-controller_class_name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 395</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">controller_class_name</span>
  <span class="ruby-ivar">@controller_class_name</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">demodulize</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-controller_name">
            
              <b>controller_name</b>()
            
            <a href="../../classes/ActionController/Base.html#method-c-controller_name" name="method-c-controller_name" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Converts the class name from something like
“OneModule::TwoModule::NeatController” to “neat”.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-controller_name_source')" id="l_method-c-controller_name_source">show</a>
                
              </p>
              <div id="method-c-controller_name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 400</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">controller_name</span>
  <span class="ruby-ivar">@controller_name</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">controller_class_name</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/Controller$/</span>, <span class="ruby-string">&#39;&#39;</span>).<span class="ruby-identifier">underscore</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-controller_path">
            
              <b>controller_path</b>()
            
            <a href="../../classes/ActionController/Base.html#method-c-controller_path" name="method-c-controller_path" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Converts the class name from something like
“OneModule::TwoModule::NeatController” to “one_module/two_module/neat”.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-controller_path_source')" id="l_method-c-controller_path_source">show</a>
                
              </p>
              <div id="method-c-controller_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 405</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">controller_path</span>
  <span class="ruby-ivar">@controller_path</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/Controller$/</span>, <span class="ruby-string">&#39;&#39;</span>).<span class="ruby-identifier">underscore</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-filter_parameter_logging">
            
              <b>filter_parameter_logging</b>(*filter_words, &amp;block)
            
            <a href="../../classes/ActionController/Base.html#method-c-filter_parameter_logging" name="method-c-filter_parameter_logging" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Replace sensitive parameter data from the request log. <a
href="Filters.html">Filters</a> parameters that have any of the arguments
as a substring. Looks in all subhashes of the param hash for keys to
filter. If a block is given, each key and value of the parameter hash and
all subhashes is passed to it, the value or key can be replaced using
String#replace or similar method.</p>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-identifier">filter_parameter_logging</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Does</span> <span class="ruby-identifier">nothing</span>, <span class="ruby-identifier">just</span> <span class="ruby-identifier">slows</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">logging</span> <span class="ruby-identifier">process</span> <span class="ruby-identifier">down</span>

<span class="ruby-identifier">filter_parameter_logging</span> :<span class="ruby-identifier">password</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">replaces</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">value</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">all</span> <span class="ruby-identifier">keys</span> <span class="ruby-identifier">matching</span> <span class="ruby-regexp">/password/</span> <span class="ruby-identifier">with</span> <span class="ruby-string">&quot;[FILTERED]&quot;</span>

<span class="ruby-identifier">filter_parameter_logging</span> :<span class="ruby-identifier">foo</span>, <span class="ruby-string">&quot;bar&quot;</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">replaces</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">value</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">all</span> <span class="ruby-identifier">keys</span> <span class="ruby-identifier">matching</span> <span class="ruby-regexp">/foo|bar/</span> <span class="ruby-identifier">with</span> <span class="ruby-string">&quot;[FILTERED]&quot;</span>

<span class="ruby-identifier">filter_parameter_logging</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">reverse!</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/secret/</span> }
=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">reverses</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">value</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">all</span> <span class="ruby-identifier">keys</span> <span class="ruby-identifier">matching</span> <span class="ruby-regexp">/secret/</span>

<span class="ruby-identifier">filter_parameter_logging</span>(:<span class="ruby-identifier">foo</span>, <span class="ruby-string">&quot;bar&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">reverse!</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/secret/</span> }
=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">reverses</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">value</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">all</span> <span class="ruby-identifier">keys</span> <span class="ruby-identifier">matching</span> <span class="ruby-regexp">/secret/</span>, <span class="ruby-keyword">and</span>
   <span class="ruby-identifier">replaces</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">value</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">all</span> <span class="ruby-identifier">keys</span> <span class="ruby-identifier">matching</span> <span class="ruby-regexp">/foo|bar/</span> <span class="ruby-identifier">with</span> <span class="ruby-string">&quot;[FILTERED]&quot;</span>
</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-filter_parameter_logging_source')" id="l_method-c-filter_parameter_logging_source">show</a>
                
              </p>
              <div id="method-c-filter_parameter_logging_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 483</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">filter_parameter_logging</span>(*<span class="ruby-identifier">filter_words</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">parameter_filter</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">filter_words</span>.<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">to_s</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;|&#39;</span>), <span class="ruby-keyword">true</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">filter_words</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>

  <span class="ruby-identifier">define_method</span>(<span class="ruby-value">:filter_parameters</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">unfiltered_parameters</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">filtered_parameters</span> = {}

    <span class="ruby-identifier">unfiltered_parameters</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">parameter_filter</span>
        <span class="ruby-identifier">filtered_parameters</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-string">&#39;[FILTERED]&#39;</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
        <span class="ruby-identifier">filtered_parameters</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">filter_parameters</span>(<span class="ruby-identifier">value</span>)
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
        <span class="ruby-identifier">filtered_parameters</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">collect</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
          <span class="ruby-keyword">case</span> <span class="ruby-identifier">item</span>
          <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>, <span class="ruby-constant">Array</span>
            <span class="ruby-identifier">filter_parameters</span>(<span class="ruby-identifier">item</span>)
          <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">item</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">block_given?</span>
        <span class="ruby-identifier">key</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">dup</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">duplicable?</span>
        <span class="ruby-keyword">yield</span> <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>
        <span class="ruby-identifier">filtered_parameters</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">filtered_parameters</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">filtered_parameters</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">protected</span> <span class="ruby-value">:filter_parameters</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-hidden_actions">
            
              <b>hidden_actions</b>()
            
            <a href="../../classes/ActionController/Base.html#method-c-hidden_actions" name="method-c-hidden_actions" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Return an array containing the names of public methods that have been
marked hidden from the action processor. By default, all methods defined in
<a href="Base.html">ActionController::Base</a> and included modules are
hidden. More methods can be hidden using <code>hide_actions</code>.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-hidden_actions_source')" id="l_method-c-hidden_actions_source">show</a>
                
              </p>
              <div id="method-c-hidden_actions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 412</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">hidden_actions</span>
  <span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-value">:hidden_actions</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value">:hidden_actions</span>, [])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-hide_action">
            
              <b>hide_action</b>(*names)
            
            <a href="../../classes/ActionController/Base.html#method-c-hide_action" name="method-c-hide_action" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Hide each of the given methods from being callable as actions.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-hide_action_source')" id="l_method-c-hide_action_source">show</a>
                
              </p>
              <div id="method-c-hide_action_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 417</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">hide_action</span>(*<span class="ruby-identifier">names</span>)
  <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value">:hidden_actions</span>, <span class="ruby-identifier">hidden_actions</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">names</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> })
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-prepend_view_path">
            
              <b>prepend_view_path</b>(path)
            
            <a href="../../classes/ActionController/Base.html#method-c-prepend_view_path" name="method-c-prepend_view_path" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Adds a view_path to the front of the <a
href="Base.html#method-c-view_paths">::view_paths</a> array. If the current
class has no view paths, copy them from the superclass.  This change will
be visible for all future requests.</p>

<pre>ArticleController.prepend_view_path(&quot;views/default&quot;)
ArticleController.prepend_view_path([&quot;views/default&quot;, &quot;views/custom&quot;])</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-prepend_view_path_source')" id="l_method-c-prepend_view_path_source">show</a>
                
              </p>
              <div id="method-c-prepend_view_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 443</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">prepend_view_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-ivar">@view_paths</span> = <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">view_paths</span>.<span class="ruby-identifier">dup</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@view_paths</span>) <span class="ruby-operator">||</span> <span class="ruby-ivar">@view_paths</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-ivar">@view_paths</span>.<span class="ruby-identifier">unshift</span>(*<span class="ruby-identifier">path</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-view_paths">
            
              <b>view_paths</b>()
            
            <a href="../../classes/ActionController/Base.html#method-c-view_paths" name="method-c-view_paths" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>View load paths determine the bases from which template references can be
made. So a call to render(“test/template”) will be looked up in the view
load paths array and the closest match will be returned.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-view_paths_source')" id="l_method-c-view_paths_source">show</a>
                
              </p>
              <div id="method-c-view_paths_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 424</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">view_paths</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span> <span class="ruby-ivar">@view_paths</span>
    <span class="ruby-ivar">@view_paths</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">view_paths</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-view_paths-3D">
            
              <b>view_paths=</b>(value)
            
            <a href="../../classes/ActionController/Base.html#method-c-view_paths-3D" name="method-c-view_paths-3D" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-view_paths-3D_source')" id="l_method-c-view_paths-3D_source">show</a>
                
              </p>
              <div id="method-c-view_paths-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 432</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">view_paths=</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@view_paths</span> = <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">process_view_paths</span>(<span class="ruby-identifier">value</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-append_view_path">
            
              <b>append_view_path</b>(path)
            
            <a href="../../classes/ActionController/Base.html#method-i-append_view_path" name="method-i-append_view_path" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Adds a view_path to the end of the <a
href="Base.html#method-c-view_paths">::view_paths</a> array. This change
affects the current request only.</p>

<pre>self.append_view_path(&quot;views/default&quot;)
self.append_view_path([&quot;views/default&quot;, &quot;views/custom&quot;])</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-append_view_path_source')" id="l_method-i-append_view_path_source">show</a>
                
              </p>
              <div id="method-i-append_view_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 677</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">append_view_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-ivar">@template</span>.<span class="ruby-identifier">view_paths</span>.<span class="ruby-identifier">push</span>(*<span class="ruby-identifier">path</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-controller_class_name">
            
              <b>controller_class_name</b>()
            
            <a href="../../classes/ActionController/Base.html#method-i-controller_class_name" name="method-i-controller_class_name" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Converts the class name from something like
“OneModule::TwoModule::NeatController” to “NeatController”.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-controller_class_name_source')" id="l_method-i-controller_class_name_source">show</a>
                
              </p>
              <div id="method-i-controller_class_name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 632</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">controller_class_name</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">controller_class_name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-controller_name">
            
              <b>controller_name</b>()
            
            <a href="../../classes/ActionController/Base.html#method-i-controller_name" name="method-i-controller_name" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Converts the class name from something like
“OneModule::TwoModule::NeatController” to “neat”.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-controller_name_source')" id="l_method-i-controller_name_source">show</a>
                
              </p>
              <div id="method-i-controller_name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 637</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">controller_name</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">controller_name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-controller_path">
            
              <b>controller_path</b>()
            
            <a href="../../classes/ActionController/Base.html#method-i-controller_path" name="method-i-controller_path" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Converts the class name from something like
“OneModule::TwoModule::NeatController” to “one_module/two_module/neat”.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-controller_path_source')" id="l_method-i-controller_path_source">show</a>
                
              </p>
              <div id="method-i-controller_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 642</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">controller_path</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">controller_path</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-prepend_view_path">
            
              <b>prepend_view_path</b>(path)
            
            <a href="../../classes/ActionController/Base.html#method-i-prepend_view_path" name="method-i-prepend_view_path" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Adds a view_path to the front of the <a
href="Base.html#method-c-view_paths">::view_paths</a> array. This change
affects the current request only.</p>

<pre>self.prepend_view_path(&quot;views/default&quot;)
self.prepend_view_path([&quot;views/default&quot;, &quot;views/custom&quot;])</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-prepend_view_path_source')" id="l_method-i-prepend_view_path_source">show</a>
                
              </p>
              <div id="method-i-prepend_view_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 667</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">prepend_view_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-ivar">@template</span>.<span class="ruby-identifier">view_paths</span>.<span class="ruby-identifier">unshift</span>(*<span class="ruby-identifier">path</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-send_response">
            
              <b>send_response</b>()
            
            <a href="../../classes/ActionController/Base.html#method-i-send_response" name="method-i-send_response" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-send_response_source')" id="l_method-i-send_response_source">show</a>
                
              </p>
              <div id="method-i-send_response_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 539</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">send_response</span>
  <span class="ruby-identifier">response</span>.<span class="ruby-identifier">prepare!</span>
  <span class="ruby-identifier">response</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-session_enabled-3F">
            
              <b>session_enabled?</b>()
            
            <a href="../../classes/ActionController/Base.html#method-i-session_enabled-3F" name="method-i-session_enabled-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-session_enabled-3F_source')" id="l_method-i-session_enabled-3F_source">show</a>
                
              </p>
              <div id="method-i-session_enabled-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 646</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">session_enabled?</span>
  <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-string">&quot;Sessions are now lazy loaded. So if you don&#39;t access them, consider them disabled.&quot;</span>, <span class="ruby-identifier">caller</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-url_for">
            
              <b>url_for</b>(options = {})
            
            <a href="../../classes/ActionController/Base.html#method-i-url_for" name="method-i-url_for" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns a URL that has been rewritten according to the options hash and the
defined routes. (For doing a complete redirect, use
<code>redirect_to</code>).</p>

<p><code>url_for</code> is used to:</p>

<p>All keys given to <code>url_for</code> are forwarded to the Route module,
save for the following:</p>
<ul><li>
<p><code>:anchor</code> - Specifies the anchor name to be appended to the
path. For example, <code>url_for :controller =&gt; &#39;posts&#39;, :action
=&gt; &#39;show&#39;, :id =&gt; 10, :anchor =&gt; &#39;comments&#39;</code>
will produce “/posts/show/10#comments”.</p>
</li><li>
<p><code>:only_path</code> - If true, returns the relative URL (omitting the
protocol, host name, and port) (<code>false</code> by default).</p>
</li><li>
<p><code>:trailing_slash</code> - If true, adds a trailing slash, as in
“/archive/2005/”. Note that this is currently not recommended since it
breaks caching.</p>
</li><li>
<p><code>:host</code> - Overrides the default (current) host if provided.</p>
</li><li>
<p><code>:protocol</code> - Overrides the default (current) protocol if
provided.</p>
</li><li>
<p><code>:port</code> - Optionally specify the port to connect to.</p>
</li><li>
<p><code>:user</code> - Inline HTTP authentication (only plucked out if
<code>:password</code> is also present).</p>
</li><li>
<p><code>:password</code> - Inline HTTP authentication (only plucked out if
<code>:user</code> is also present).</p>
</li><li>
<p><code>:skip_relative_url_root</code> - If true, the url is not constructed
using the <code>relative_url_root</code> of the request so the path will
include the web server relative installation directory.</p>
</li></ul>

<p>The URL is generated from the remaining keys in the hash. A URL contains
two key parts: the &lt;base&gt; and a query string. Routes composes a query
string as the key/value pairs not included in the &lt;base&gt;.</p>

<p>The default Routes setup supports a typical <a
href="../Rails.html">Rails</a> path of “controller/action/id” where action
and id are optional, with action defaulting to &#39;index&#39; when not
given. Here are some typical <a
href="Base.html#method-i-url_for">#url_for</a> statements and their
corresponding URLs:</p>

<pre class="ruby"><span class="ruby-identifier">url_for</span> :<span class="ruby-identifier">controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;posts&#39;</span>, :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;recent&#39;</span>                <span class="ruby-comment"># =&gt; &#39;proto://host.com/posts/recent&#39;</span>
<span class="ruby-identifier">url_for</span> :<span class="ruby-identifier">controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;posts&#39;</span>, :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;index&#39;</span>                 <span class="ruby-comment"># =&gt; &#39;proto://host.com/posts&#39;</span>
<span class="ruby-identifier">url_for</span> :<span class="ruby-identifier">controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;posts&#39;</span>, :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;index&#39;</span>, :<span class="ruby-identifier">port=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;8033&#39;</span>  <span class="ruby-comment"># =&gt; &#39;proto://host.com:8033/posts&#39;</span>
<span class="ruby-identifier">url_for</span> :<span class="ruby-identifier">controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;posts&#39;</span>, :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span>, :<span class="ruby-identifier">id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>       <span class="ruby-comment"># =&gt; &#39;proto://host.com/posts/show/10&#39;</span>
<span class="ruby-identifier">url_for</span> :<span class="ruby-identifier">controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;posts&#39;</span>, :<span class="ruby-identifier">user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;d&#39;</span>, :<span class="ruby-identifier">password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;123&#39;</span>   <span class="ruby-comment"># =&gt; &#39;proto://d:123@host.com/posts&#39;</span>
</pre>

<p>When generating a new URL, missing values may be filled in from the current
request&#39;s parameters. For example, <code>url_for :action =&gt;
&#39;some_action&#39;</code> will retain the current controller, as
expected. This behavior extends to other parameters, including
<code>:controller</code>, <code>:id</code>, and any other parameters that
are placed into a Route&#39;s path.   The URL helpers such as
<code>url_for</code> have a limited form of memory: when generating a new
URL, they can look for missing values in the current request&#39;s
parameters. Routes attempts to guess when a value should and should not be
taken from the defaults. There are a few simple rules on how this is
performed:</p>
<ul><li>
<p>If the controller name begins with a slash no defaults are used:</p>

<pre class="ruby"><span class="ruby-identifier">url_for</span> :<span class="ruby-identifier">controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;/home&#39;</span>
</pre>

<p>In particular, a leading slash ensures no namespace is assumed. Thus, while
<code>url_for :controller =&gt; &#39;users&#39;</code> may resolve to
<code>Admin::UsersController</code> if the current controller lives under
that module, <code>url_for :controller =&gt; &#39;/users&#39;</code>
ensures you link to <code>::UsersController</code> no matter what.</p>
</li><li>
<p>If the controller changes, the action will default to index unless provided</p>
</li></ul>

<p>The final rule is applied while the URL is being generated and is best
illustrated by an example. Let us consider the route given by
<code>map.connect &#39;people/:last/:first/:action&#39;, :action =&gt;
&#39;bio&#39;, :controller =&gt; &#39;people&#39;</code>.</p>

<p>Suppose that the current URL is “people/hh/david/contacts”. Let&#39;s
consider a few different cases of URLs which are generated from this page.</p>
<ul><li>
<p><code>url_for :action =&gt; &#39;bio&#39;</code> – During the generation of
this URL, default values will be used for the first and</p>
</li></ul>

<p>last components, and the action shall change. The generated URL will be,
“people/hh/david/bio”.</p>
<ul><li>
<p><code>url_for :first =&gt; &#39;davids-little-brother&#39;</code> This
generates the URL &#39;people/hh/davids-little-brother&#39; – note that
this URL leaves out the assumed action of &#39;bio&#39;.</p>
</li></ul>

<p>However, you might ask why the action from the current request,
&#39;contacts&#39;, isn&#39;t carried over into the new URL. The answer has
to do with the order in which the parameters appear in the generated path.
In a nutshell, since the value that appears in the slot for
<code>:first</code> is not equal to default value for <code>:first</code>
we stop using defaults. On its own, this rule can account for much of the
typical <a href="../Rails.html">Rails</a> URL behavior.   Although a
convenience, defaults can occasionally get in your way. In some cases a
default persists longer than desired. The default may be cleared by adding
<code>:name =&gt; nil</code> to <code>url_for</code>&#39;s options. This is
often required when writing form helpers, since the defaults in play may
vary greatly depending upon where the helper is used from. The following
line will redirect to PostController&#39;s default action, regardless of
the page it is displayed on:</p>

<pre class="ruby"><span class="ruby-identifier">url_for</span> :<span class="ruby-identifier">controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;posts&#39;</span>, :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>
</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-url_for_source')" id="l_method-i-url_for_source">show</a>
                
              </p>
              <div id="method-i-url_for_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 619</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">url_for</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span> <span class="ruby-operator">||=</span> {}
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">options</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span>
      <span class="ruby-identifier">options</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>
      <span class="ruby-ivar">@url</span>.<span class="ruby-identifier">rewrite</span>(<span class="ruby-identifier">rewrite_options</span>(<span class="ruby-identifier">options</span>))
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">polymorphic_url</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-view_paths">
            
              <b>view_paths</b>()
            
            <a href="../../classes/ActionController/Base.html#method-i-view_paths" name="method-i-view_paths" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>View load paths for controller.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-view_paths_source')" id="l_method-i-view_paths_source">show</a>
                
              </p>
              <div id="method-i-view_paths_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 653</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">view_paths</span>
  <span class="ruby-ivar">@template</span>.<span class="ruby-identifier">view_paths</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-view_paths-3D">
            
              <b>view_paths=</b>(value)
            
            <a href="../../classes/ActionController/Base.html#method-i-view_paths-3D" name="method-i-view_paths-3D" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-view_paths-3D_source')" id="l_method-i-view_paths-3D_source">show</a>
                
              </p>
              <div id="method-i-view_paths-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 657</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">view_paths=</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@template</span>.<span class="ruby-identifier">view_paths</span> = <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">process_view_paths</span>(<span class="ruby-identifier">value</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
              
      <div class="sectiontitle">Instance Protected methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-default_url_options">
            
              <b>default_url_options</b>(options = nil)
            
            <a href="../../classes/ActionController/Base.html#method-i-default_url_options" name="method-i-default_url_options" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Overwrite to implement a number of default options that all url_for-based
methods will use. The default options should come in the form of a hash,
just like the one you would use for <a
href="Base.html#method-i-url_for">#url_for</a> directly. Example:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">default_url_options</span>(<span class="ruby-identifier">options</span>)
  { :<span class="ruby-identifier">project</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@project</span>.<span class="ruby-identifier">active?</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@project</span>.<span class="ruby-identifier">url_name</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;unknown&quot;</span> }
<span class="ruby-keyword">end</span>
</pre>

<p>As you can infer from the example, this is mostly useful for situations
where you want to centralize dynamic decisions about the urls as they stem
from the business domain. Please note that any individual <a
href="Base.html#method-i-url_for">#url_for</a> call can always override the
defaults set by this method.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-default_url_options_source')" id="l_method-i-default_url_options_source">show</a>
                
              </p>
              <div id="method-i-default_url_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 1063</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">default_url_options</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword">nil</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-expires_in">
            
              <b>expires_in</b>(seconds, options = {})
            
            <a href="../../classes/ActionController/Base.html#method-i-expires_in" name="method-i-expires_in" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Sets a HTTP 1.1 Cache-Control header. Defaults to issuing a “private”
instruction, so that intermediate caches shouldn&#39;t cache the response.</p>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-identifier">expires_in</span> <span class="ruby-value">20</span>.<span class="ruby-identifier">minutes</span>
<span class="ruby-identifier">expires_in</span> <span class="ruby-value">3</span>.<span class="ruby-identifier">hours</span>, :<span class="ruby-identifier">public</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>
<span class="ruby-identifier">expires</span> <span class="ruby-keyword">in</span> <span class="ruby-value">3</span>.<span class="ruby-identifier">hours</span>, <span class="ruby-string">&#39;max-stale&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>.<span class="ruby-identifier">hours</span>, :<span class="ruby-identifier">public</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>
</pre>

<p>This method will overwrite an existing Cache-Control header. See <a
href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html">www.w3.org/Protocols/rfc2616/rfc2616-sec14.html</a>
for more possibilities.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-expires_in_source')" id="l_method-i-expires_in_source">show</a>
                
              </p>
              <div id="method-i-expires_in_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 1218</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">expires_in</span>(<span class="ruby-identifier">seconds</span>, <span class="ruby-identifier">options</span> = {}) <span class="ruby-comment">#:doc:</span>
  <span class="ruby-identifier">cache_control</span> = <span class="ruby-identifier">response</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cache-Control&quot;</span>].<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;,&quot;</span>).<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">strip</span> }

  <span class="ruby-identifier">cache_control</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;max-age=#{seconds}&quot;</span>
  <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">&quot;no-cache&quot;</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:public</span>]
    <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">&quot;private&quot;</span>)
    <span class="ruby-identifier">cache_control</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;public&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">cache_control</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;private&quot;</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-comment"># This allows for additional headers to be passed through like &#39;max-stale&#39; =&gt; 5.hours</span>
  <span class="ruby-identifier">cache_control</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">symbolize_keys</span>.<span class="ruby-identifier">reject</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-value">:public</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-value">:private</span> }.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;#{k.to_s}=#{v.to_s}&quot;</span>}
  
  <span class="ruby-identifier">response</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cache-Control&quot;</span>] = <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;, &#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-expires_now">
            
              <b>expires_now</b>()
            
            <a href="../../classes/ActionController/Base.html#method-i-expires_now" name="method-i-expires_now" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Sets a HTTP 1.1 Cache-Control header of “no-cache” so no caching should
occur by the browser or intermediate caches (like caching proxy servers).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-expires_now_source')" id="l_method-i-expires_now_source">show</a>
                
              </p>
              <div id="method-i-expires_now_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 1238</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">expires_now</span> <span class="ruby-comment">#:doc:</span>
  <span class="ruby-identifier">response</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cache-Control&quot;</span>] = <span class="ruby-string">&quot;no-cache&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-fresh_when">
            
              <b>fresh_when</b>(options)
            
            <a href="../../classes/ActionController/Base.html#method-i-fresh_when" name="method-i-fresh_when" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Sets the etag, last_modified, or both on the response and renders a “304
Not Modified” response if the request is already fresh.</p>

<p>Parameters:</p>
<ul><li>
<p><code>:etag</code></p>
</li><li>
<p><code>:last_modified</code></p>
</li><li>
<p><code>:public</code> By default the Cache-Control header is private, set
this to true if you want your application to be cachable by other devices
(proxy caches).</p>
</li></ul>

<p>Example:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">show</span>
  <span class="ruby-ivar">@article</span> = <span class="ruby-constant">Article</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">id</span>])
  <span class="ruby-identifier">fresh_when</span>(:<span class="ruby-identifier">etag</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@article</span>, :<span class="ruby-identifier">last_modified</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@article</span>.<span class="ruby-identifier">created_at</span>.<span class="ruby-identifier">utc</span>, :<span class="ruby-identifier">public</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
<span class="ruby-keyword">end</span>
</pre>

<p>This will render the show template if the request isn&#39;t sending a
matching etag or If-Modified-Since header and just a “304 Not Modified”
response if there&#39;s a match.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-fresh_when_source')" id="l_method-i-fresh_when_source">show</a>
                
              </p>
              <div id="method-i-fresh_when_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 1189</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">fresh_when</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">options</span>.<span class="ruby-identifier">assert_valid_keys</span>(<span class="ruby-value">:etag</span>, <span class="ruby-value">:last_modified</span>, <span class="ruby-value">:public</span>)

  <span class="ruby-identifier">response</span>.<span class="ruby-identifier">etag</span>          = <span class="ruby-identifier">options</span>[<span class="ruby-value">:etag</span>]          <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:etag</span>]
  <span class="ruby-identifier">response</span>.<span class="ruby-identifier">last_modified</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:last_modified</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:last_modified</span>]
  
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:public</span>] 
    <span class="ruby-identifier">cache_control</span> = <span class="ruby-identifier">response</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cache-Control&quot;</span>].<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;,&quot;</span>).<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">strip</span> }
    <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">&quot;private&quot;</span>)
    <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">&quot;no-cache&quot;</span>)
    <span class="ruby-identifier">cache_control</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;public&quot;</span>
    <span class="ruby-identifier">response</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cache-Control&quot;</span>] = <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;, &#39;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">fresh?</span>(<span class="ruby-identifier">response</span>)
    <span class="ruby-identifier">head</span> <span class="ruby-value">:not_modified</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-head">
            
              <b>head</b>(*args)
            
            <a href="../../classes/ActionController/Base.html#method-i-head" name="method-i-head" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Return a response that has no content (merely headers). The options
argument is interpreted to be a hash of header names and values. This
allows you to easily return a response that consists only of significant
headers:</p>

<pre class="ruby"><span class="ruby-identifier">head</span> :<span class="ruby-identifier">created</span>, :<span class="ruby-identifier">location</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">person_path</span>(<span class="ruby-ivar">@person</span>)
</pre>

<p>It can also be used to return exceptional conditions:</p>

<pre>return head(:method_not_allowed) unless request.post?
return head(:bad_request) unless valid_request?
render</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-head_source')" id="l_method-i-head_source">show</a>
                
              </p>
              <div id="method-i-head_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 1005</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">head</span>(*<span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">2</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;too many arguments to head&quot;</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;too few arguments to head&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>
  <span class="ruby-identifier">status</span> = <span class="ruby-identifier">interpret_status</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:status</span>) <span class="ruby-operator">||</span> <span class="ruby-value">:ok</span>)

  <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">headers</span>[<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">dasherize</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/-/</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">capitalize</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;-&quot;</span>)] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">render</span> <span class="ruby-value">:nothing</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">status</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-redirect_to">
            
              <b>redirect_to</b>(options = {}, response_status = {})
            
            <a href="../../classes/ActionController/Base.html#method-i-redirect_to" name="method-i-redirect_to" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Redirects the browser to the target specified in <code>options</code>. This
parameter can take one of three forms:</p>
<ul><li>
<p><code>Hash</code> - The URL will be generated by calling <a
href="Base.html#method-i-url_for">#url_for</a> with the
<code>options</code>.</p>
</li><li>
<p><code>Record</code> - The URL will be generated by calling <a
href="Base.html#method-i-url_for">#url_for</a> with the
<code>options</code>, which will reference a named URL for that record.</p>
</li><li>
<p><code>String</code> starting with <code>protocol://</code> (like
<code>http://</code>) - Is passed straight through as the target for
redirection.</p>
</li><li>
<p><code>String</code> not containing a protocol - The current protocol and
host is prepended to the string.</p>
</li><li>
<p><code>:back</code> - Back to the page that issued the request. Useful for
forms that are triggered from multiple places. Short-hand for
<code>redirect_to(request.env["HTTP_REFERER"])</code></p>
</li></ul>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-identifier">redirect_to</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;show&quot;</span>, :<span class="ruby-identifier">id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>
<span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">post</span>
<span class="ruby-identifier">redirect_to</span> <span class="ruby-string">&quot;http://www.rubyonrails.org&quot;</span>
<span class="ruby-identifier">redirect_to</span> <span class="ruby-string">&quot;/images/screenshot.jpg&quot;</span>
<span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">articles_url</span>
<span class="ruby-identifier">redirect_to</span> :<span class="ruby-identifier">back</span>
</pre>

<p>The redirection happens as a “302 Moved” header unless otherwise specified.</p>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">post_url</span>(<span class="ruby-ivar">@post</span>), :<span class="ruby-identifier">status</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">found</span>
<span class="ruby-identifier">redirect_to</span> :<span class="ruby-identifier">action=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;atom&#39;</span>, :<span class="ruby-identifier">status</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">moved_permanently</span>
<span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">post_url</span>(<span class="ruby-ivar">@post</span>), :<span class="ruby-identifier">status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">301</span>
<span class="ruby-identifier">redirect_to</span> :<span class="ruby-identifier">action=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;atom&#39;</span>, :<span class="ruby-identifier">status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">302</span>
</pre>

<p>The status code can either be a standard <a
href="http://www.iana.org/assignments/http-status-codes">HTTP Status
code</a> as an  integer, or a symbol representing the downcased,
underscored and symbolized description.</p>

<p>It is also possible to assign a flash message as part of the redirection.
There are two special accessors for commonly used the flash names
<code>alert</code> and <code>notice</code> as well as a general purpose
<code>flash</code> bucket.</p>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">post_url</span>(<span class="ruby-ivar">@post</span>), :<span class="ruby-identifier">alert</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Watch it, mister!&quot;</span>
<span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">post_url</span>(<span class="ruby-ivar">@post</span>), :<span class="ruby-identifier">status=</span><span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">found</span>, :<span class="ruby-identifier">notice</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Pay attention to the road&quot;</span>
<span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">post_url</span>(<span class="ruby-ivar">@post</span>), :<span class="ruby-identifier">status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">301</span>, :<span class="ruby-identifier">flash</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">updated_post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@post</span>.<span class="ruby-identifier">id</span> }
<span class="ruby-identifier">redirect_to</span> { :<span class="ruby-identifier">action=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;atom&#39;</span> }, :<span class="ruby-identifier">alert</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Something serious happened&quot;</span>
</pre>

<p>When using <code>redirect_to :back</code>, if there is no referrer,
RedirectBackError will be raised. You may specify some fallback behavior
for this case by rescuing RedirectBackError.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-redirect_to_source')" id="l_method-i-redirect_to_source">show</a>
                
              </p>
              <div id="method-i-redirect_to_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 1105</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">redirect_to</span>(<span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">response_status</span> = {}) <span class="ruby-comment">#:doc:</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActionControllerError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Cannot redirect to nil!&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>]
    <span class="ruby-identifier">status</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:status</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">response_status</span>[<span class="ruby-value">:status</span>]
    <span class="ruby-identifier">status</span> = <span class="ruby-identifier">response_status</span>[<span class="ruby-value">:status</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">status</span> = <span class="ruby-number">302</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">response</span>.<span class="ruby-identifier">redirected_to</span> = <span class="ruby-identifier">options</span>

  <span class="ruby-keyword">case</span> <span class="ruby-identifier">options</span>
    <span class="ruby-comment"># The scheme name consist of a letter followed by any combination of</span>
    <span class="ruby-comment"># letters, digits, and the plus (&quot;+&quot;), period (&quot;.&quot;), or hyphen (&quot;-&quot;)</span>
    <span class="ruby-comment"># characters; and is terminated by a colon (&quot;:&quot;).</span>
    <span class="ruby-keyword">when</span> <span class="ruby-regexp">%r{^\w[\w\d+.-]*:.*}</span>
      <span class="ruby-identifier">redirect_to_full_url</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">status</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span>
      <span class="ruby-identifier">redirect_to_full_url</span>(<span class="ruby-identifier">request</span>.<span class="ruby-identifier">protocol</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">host_with_port</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">options</span>, <span class="ruby-identifier">status</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-value">:back</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">referer</span> = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Referer&quot;</span>]
        <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">referer</span>, <span class="ruby-value">:status=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">status</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">RedirectBackError</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">redirect_to_full_url</span>(<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>), <span class="ruby-identifier">status</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-redirect_to_full_url">
            
              <b>redirect_to_full_url</b>(url, status)
            
            <a href="../../classes/ActionController/Base.html#method-i-redirect_to_full_url" name="method-i-redirect_to_full_url" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-redirect_to_full_url_source')" id="l_method-i-redirect_to_full_url_source">show</a>
                
              </p>
              <div id="method-i-redirect_to_full_url_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 1137</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">redirect_to_full_url</span>(<span class="ruby-identifier">url</span>, <span class="ruby-identifier">status</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">DoubleRenderError</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">performed?</span>
  <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span>(<span class="ruby-node">&quot;Redirected to #{url}&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">logger</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info?</span>
  <span class="ruby-identifier">response</span>.<span class="ruby-identifier">redirect</span>(<span class="ruby-identifier">url</span>, <span class="ruby-identifier">interpret_status</span>(<span class="ruby-identifier">status</span>))
  <span class="ruby-ivar">@performed_redirect</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-render">
            
              <b>render</b>(options = nil, extra_options = {}, &amp;block)
            
            <a href="../../classes/ActionController/Base.html#method-i-render" name="method-i-render" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Renders the content that will be returned to the browser as the response
body.</p>

<h3 id="method-i-render-label-Rendering+an+action">Rendering an action</h3>

<p>Action rendering is the most common form and the type used automatically by
Action Controller when nothing else is specified. By default, actions are
rendered within the current layout (if one exists).</p>

<pre class="ruby"><span class="ruby-comment"># Renders the template for the action &quot;goal&quot; within the current controller</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;goal&quot;</span>

<span class="ruby-comment"># Renders the template for the action &quot;short_goal&quot; within the current controller,</span>
<span class="ruby-comment"># but without the current active layout</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;short_goal&quot;</span>, :<span class="ruby-identifier">layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>

<span class="ruby-comment"># Renders the template for the action &quot;long_goal&quot; within the current controller,</span>
<span class="ruby-comment"># but with a custom layout</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;long_goal&quot;</span>, :<span class="ruby-identifier">layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;spectacular&quot;</span>
</pre>

<h3 id="method-i-render-label-Rendering+partials">Rendering partials</h3>

<p>Partial rendering in a controller is most commonly used together with Ajax
calls that only update one or a few elements on a page without reloading.
Rendering of partials from the controller makes it possible to use the same
partial template in both the full-page rendering (by calling it from within
the template) and when sub-page updates happen (from the controller action
responding to Ajax calls). By default, the current layout is not used.</p>

<pre class="ruby"><span class="ruby-comment"># Renders the same partial with a local variable.</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;person&quot;</span>, :<span class="ruby-identifier">locals</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;david&quot;</span> }

<span class="ruby-comment"># Renders the partial, making @new_person available through</span>
<span class="ruby-comment"># the local variable &#39;person&#39;</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;person&quot;</span>, :<span class="ruby-identifier">object</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@new_person</span>

<span class="ruby-comment"># Renders a collection of the same partial by making each element</span>
<span class="ruby-comment"># of @winners available through the local variable &quot;person&quot; as it</span>
<span class="ruby-comment"># builds the complete response.</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;person&quot;</span>, :<span class="ruby-identifier">collection</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@winners</span>

<span class="ruby-comment"># Renders a collection of partials but with a custom local variable name</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;admin_person&quot;</span>, :<span class="ruby-identifier">collection</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@winners</span>, :<span class="ruby-identifier">as</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">person</span>

<span class="ruby-comment"># Renders the same collection of partials, but also renders the</span>
<span class="ruby-comment"># person_divider partial between each person partial.</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;person&quot;</span>, :<span class="ruby-identifier">collection</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@winners</span>, :<span class="ruby-identifier">spacer_template</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;person_divider&quot;</span>

<span class="ruby-comment"># Renders a collection of partials located in a view subfolder</span>
<span class="ruby-comment"># outside of our current controller.  In this example we will be</span>
<span class="ruby-comment"># rendering app/views/shared/_note.r(html|xml)  Inside the partial</span>
<span class="ruby-comment"># each element of @new_notes is available as the local var &quot;note&quot;.</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;shared/note&quot;</span>, :<span class="ruby-identifier">collection</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@new_notes</span>

<span class="ruby-comment"># Renders the partial with a status code of 500 (internal error).</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;broken&quot;</span>, :<span class="ruby-identifier">status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">500</span>
</pre>

<p>Note that the partial filename must also be a valid Ruby variable name, so
e.g. 2005 and register-user are invalid.</p>

<h2 id="method-i-render-label-Automatic+etagging">Automatic etagging</h2>

<p>Rendering will automatically insert the etag header on 200 OK responses.
The etag is calculated using MD5 of the response body. If a request comes
in that has a matching etag, the response will be changed to a 304 Not
Modified and the response body will be set to an empty string. No etag
header will be inserted if it&#39;s already set.</p>

<h3 id="method-i-render-label-Rendering+a+template">Rendering a template</h3>

<p>Template rendering works just like action rendering except that it takes a
path relative to the template root. The current layout is automatically
applied.</p>

<pre class="ruby"><span class="ruby-comment"># Renders the template located in [TEMPLATE_ROOT]/weblog/show.r(html|xml) (in Rails, app/views/weblog/show.erb)</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">template</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;weblog/show&quot;</span>

<span class="ruby-comment"># Renders the template with a local variable</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">template</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;weblog/show&quot;</span>, :<span class="ruby-identifier">locals</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">customer</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">new</span>}
</pre>

<h3 id="method-i-render-label-Rendering+a+file">Rendering a file</h3>

<p>File rendering works just like action rendering except that it takes a
filesystem path. By default, the path is assumed to be absolute, and the
current layout is not applied.</p>

<pre class="ruby"><span class="ruby-comment"># Renders the template located at the absolute filesystem path</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;/path/to/some/template.erb&quot;</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;c:/path/to/some/template.erb&quot;</span>

<span class="ruby-comment"># Renders a template within the current layout, and with a 404 status code</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;/path/to/some/template.erb&quot;</span>, :<span class="ruby-identifier">layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, :<span class="ruby-identifier">status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">404</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;c:/path/to/some/template.erb&quot;</span>, :<span class="ruby-identifier">layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, :<span class="ruby-identifier">status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">404</span>
</pre>

<h3 id="method-i-render-label-Rendering+text">Rendering text</h3>

<p>Rendering of text is usually used for tests or for rendering prepared
content, such as a cache. By default, text rendering is not done within the
active layout.</p>

<pre class="ruby"><span class="ruby-comment"># Renders the clear text &quot;hello world&quot; with status code 200</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;hello world!&quot;</span>

<span class="ruby-comment"># Renders the clear text &quot;Explosion!&quot;  with status code 500</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Explosion!&quot;</span>, :<span class="ruby-identifier">status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">500</span>

<span class="ruby-comment"># Renders the clear text &quot;Hi there!&quot; within the current active layout (if one exists)</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Hi there!&quot;</span>, :<span class="ruby-identifier">layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>

<span class="ruby-comment"># Renders the clear text &quot;Hi there!&quot; within the layout</span>
<span class="ruby-comment"># placed in &quot;app/views/layouts/special.r(html|xml)&quot;</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Hi there!&quot;</span>, :<span class="ruby-identifier">layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;special&quot;</span>
</pre>

<h3 id="method-i-render-label-Streaming+data+and%2For+controlling+the+page+generation"><a href="Streaming.html">Streaming</a> data and/or controlling the page generation</h3>

<p>The <code>:text</code> option can also accept a Proc object, which can be
used to:</p>
<ol><li>
<p>stream on-the-fly generated data to the browser. Note that you should use
the methods provided by ActionController::Steaming instead if you want to
stream a buffer or a file.</p>
</li><li>
<p>manually control the page generation. This should generally be avoided, as
it violates the separation between code and content, and because almost
everything that can be done with this method can also be done more cleanly
using one of the other rendering methods, most notably templates.</p>
</li></ol>

<p>Two arguments are passed to the proc, a <code>response</code> object and an
<code>output</code> object. The response object is equivalent to the return
value of the ActionController::Base#response method, and can be used to
control various things in the HTTP response, such as setting the
Content-Type header. The output object is an writable <code>IO</code>-like
object, so one can call <code>write</code> and <code>flush</code> on it.</p>

<p>The following example demonstrates how one can stream a large amount of
on-the-fly generated data to the browser:</p>

<pre class="ruby"><span class="ruby-comment"># Streams about 180 MB of generated data to the browser.</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">proc</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">response</span>, <span class="ruby-identifier">output</span><span class="ruby-operator">|</span>
  <span class="ruby-value">10_000_000</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">output</span>.<span class="ruby-identifier">write</span>(<span class="ruby-node">&quot;This is line #{i}\n&quot;</span>)
  <span class="ruby-keyword">end</span>
}
</pre>

<p>Another example:</p>

<pre class="ruby"><span class="ruby-comment"># Renders &quot;Hello from code!&quot;</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">proc</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">response</span>, <span class="ruby-identifier">output</span><span class="ruby-operator">|</span> <span class="ruby-identifier">output</span>.<span class="ruby-identifier">write</span>(<span class="ruby-string">&quot;Hello from code!&quot;</span>) }
</pre>

<h3 id="method-i-render-label-Rendering+XML">Rendering XML</h3>

<p>Rendering XML sets the content type to application/xml.</p>

<pre class="ruby"><span class="ruby-comment"># Renders &#39;&lt;name&gt;David&lt;/name&gt;&#39;</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">xml</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;David&quot;</span>}.<span class="ruby-identifier">to_xml</span>
</pre>

<p>It&#39;s not necessary to call <code>to_xml</code> on the object you want
to render, since <code>render</code> will automatically do that for you:</p>

<pre class="ruby"><span class="ruby-comment"># Also renders &#39;&lt;name&gt;David&lt;/name&gt;&#39;</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">xml</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;David&quot;</span>}
</pre>

<h3 id="method-i-render-label-Rendering+JSON">Rendering JSON</h3>

<p>Rendering JSON sets the content type to application/json and optionally
wraps the JSON in a callback. It is expected that the response will be
parsed (or eval&#39;d) for use as a data structure.</p>

<pre class="ruby"><span class="ruby-comment"># Renders &#39;{&quot;name&quot;: &quot;David&quot;}&#39;</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">json</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;David&quot;</span>}.<span class="ruby-identifier">to_json</span>
</pre>

<p>It&#39;s not necessary to call <code>to_json</code> on the object you want
to render, since <code>render</code> will automatically do that for you:</p>

<pre class="ruby"><span class="ruby-comment"># Also renders &#39;{&quot;name&quot;: &quot;David&quot;}&#39;</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">json</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;David&quot;</span>}
</pre>

<p>Sometimes the result isn&#39;t handled directly by a script (such as when
the request comes from a SCRIPT tag), so the <code>:callback</code> option
is provided for these cases.</p>

<pre class="ruby"><span class="ruby-comment"># Renders &#39;show({&quot;name&quot;: &quot;David&quot;})&#39;</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">json</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;David&quot;</span>}.<span class="ruby-identifier">to_json</span>, :<span class="ruby-identifier">callback</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span>
</pre>

<h3 id="method-i-render-label-Rendering+an+inline+template">Rendering an inline template</h3>

<p>Rendering of an inline template works as a cross between text and action
rendering where the source for the template is supplied inline, like text,
but its interpreted with ERb or <a href="../Builder.html">Builder</a>, like
action. By default, ERb is used for rendering and the current layout is not
used.</p>

<pre># Renders &quot;hello, hello, hello, again&quot;
render :inline =&gt; &quot;&lt;%= &#39;hello, &#39; * 3 + &#39;again&#39; %&gt;&quot;

# Renders &quot;&lt;p&gt;Good seeing you!&lt;/p&gt;&quot; using Builder
render :inline =&gt; &quot;xml.p { &#39;Good seeing you!&#39; }&quot;, :type =&gt; :builder

# Renders &quot;hello david&quot;
render :inline =&gt; &quot;&lt;%= &#39;hello &#39; + name %&gt;&quot;, :locals =&gt; { :name =&gt; &quot;david&quot; }</pre>

<h3 id="method-i-render-label-Rendering+inline+JavaScriptGenerator+page+updates">Rendering inline JavaScriptGenerator page updates</h3>

<p>In addition to rendering JavaScriptGenerator page updates with Ajax in RJS
templates (see <a href="../ActionView/Base.html">ActionView::Base</a> for
details), you can also pass the <code>:update</code> parameter to
<code>render</code>, along with a block, to render page updates inline.</p>

<pre class="ruby"><span class="ruby-identifier">render</span> :<span class="ruby-identifier">update</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span>  <span class="ruby-string">&#39;user_list&#39;</span>, :<span class="ruby-identifier">partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;user&#39;</span>, :<span class="ruby-identifier">collection</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@users</span>
  <span class="ruby-identifier">page</span>.<span class="ruby-identifier">visual_effect</span> :<span class="ruby-identifier">highlight</span>, <span class="ruby-string">&#39;user_list&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="method-i-render-label-Rendering+vanilla+JavaScript">Rendering vanilla JavaScript</h3>

<p>In addition to using RJS with render :update, you can also just render
vanilla JavaScript with :js.</p>

<pre class="ruby"><span class="ruby-comment"># Renders &quot;alert(&#39;hello&#39;)&quot; and sets the mime type to text/javascript</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">js</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;alert(&#39;hello&#39;)&quot;</span>
</pre>

<h3 id="method-i-render-label-Rendering+with+status+and+location+headers">Rendering with status and location headers</h3>

<p>All renders take the <code>:status</code> and <code>:location</code>
options and turn them into headers. They can even be used together:</p>

<pre class="ruby"><span class="ruby-identifier">render</span> :<span class="ruby-identifier">xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">to_xml</span>, :<span class="ruby-identifier">status</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">created</span>, :<span class="ruby-identifier">location</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">post_url</span>(<span class="ruby-identifier">post</span>)
</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-render_source')" id="l_method-i-render_source">show</a>
                
              </p>
              <div id="method-i-render_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 890</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">render</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">extra_options</span> = {}, &amp;<span class="ruby-identifier">block</span>) <span class="ruby-comment">#:doc:</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">DoubleRenderError</span>, <span class="ruby-string">&quot;Can only render or redirect once per action&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">performed?</span>

  <span class="ruby-identifier">validate_render_arguments</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">extra_options</span>, <span class="ruby-identifier">block_given?</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">options</span> = { <span class="ruby-value">:template</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">default_template</span>, <span class="ruby-value">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span> }
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">options</span> <span class="ruby-operator">==</span> <span class="ruby-value">:update</span>
    <span class="ruby-identifier">options</span> = <span class="ruby-identifier">extra_options</span>.<span class="ruby-identifier">merge</span>({ <span class="ruby-value">:update</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span> })
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">index</span>(<span class="ruby-string">&#39;/&#39;</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">extra_options</span>[<span class="ruby-value">:file</span>] = <span class="ruby-identifier">options</span>
    <span class="ruby-keyword">when</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">extra_options</span>[<span class="ruby-value">:action</span>] = <span class="ruby-identifier">options</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">extra_options</span>[<span class="ruby-value">:template</span>] = <span class="ruby-identifier">options</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">options</span> = <span class="ruby-identifier">extra_options</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
    <span class="ruby-identifier">extra_options</span>[<span class="ruby-value">:partial</span>] = <span class="ruby-identifier">options</span>
    <span class="ruby-identifier">options</span> = <span class="ruby-identifier">extra_options</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">layout</span> = <span class="ruby-identifier">pick_layout</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">response</span>.<span class="ruby-identifier">layout</span> = <span class="ruby-identifier">layout</span>.<span class="ruby-identifier">path_without_format_and_extension</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">layout</span>
  <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span>(<span class="ruby-node">&quot;Rendering template within #{layout.path_without_format_and_extension}&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">logger</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">layout</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">content_type</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:content_type</span>]
    <span class="ruby-identifier">response</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-identifier">content_type</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">location</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:location</span>]
    <span class="ruby-identifier">response</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Location&quot;</span>] = <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">location</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:text</span>)
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">layout</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@template</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:text</span>], <span class="ruby-value">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">layout</span>)) <span class="ruby-operator">:</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:text</span>]
    <span class="ruby-identifier">render_for_text</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>])

  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">file</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:file</span>]
      <span class="ruby-identifier">render_for_file</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>], <span class="ruby-identifier">layout</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:locals</span>] <span class="ruby-operator">||</span> {})

    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">template</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:template</span>]
      <span class="ruby-identifier">render_for_file</span>(<span class="ruby-identifier">template</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>], <span class="ruby-identifier">layout</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:locals</span>] <span class="ruby-operator">||</span> {})

    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">inline</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:inline</span>]
      <span class="ruby-identifier">render_for_text</span>(<span class="ruby-ivar">@template</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">layout</span>)), <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>])

    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">action_name</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:action</span>]
      <span class="ruby-identifier">render_for_file</span>(<span class="ruby-identifier">default_template</span>(<span class="ruby-identifier">action_name</span>.<span class="ruby-identifier">to_s</span>), <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>], <span class="ruby-identifier">layout</span>)

    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:xml</span>]
      <span class="ruby-identifier">response</span>.<span class="ruby-identifier">content_type</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>
      <span class="ruby-identifier">render_for_text</span>(<span class="ruby-identifier">xml</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:to_xml</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">to_xml</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">xml</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>])

    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">js</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:js</span>]
      <span class="ruby-identifier">response</span>.<span class="ruby-identifier">content_type</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">JS</span>
      <span class="ruby-identifier">render_for_text</span>(<span class="ruby-identifier">js</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>])

    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:json</span>)
      <span class="ruby-identifier">json</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:json</span>]
      <span class="ruby-identifier">json</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">json</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">json</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
      <span class="ruby-identifier">json</span> = <span class="ruby-node">&quot;#{options[:callback]}(#{json})&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:callback</span>].<span class="ruby-identifier">blank?</span>
      <span class="ruby-identifier">response</span>.<span class="ruby-identifier">content_type</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>
      <span class="ruby-identifier">render_for_text</span>(<span class="ruby-identifier">json</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>])

    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:partial</span>]
      <span class="ruby-identifier">options</span>[<span class="ruby-value">:partial</span>] = <span class="ruby-identifier">default_template_name</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:partial</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">layout</span>
        <span class="ruby-identifier">render_for_text</span>(<span class="ruby-ivar">@template</span>.<span class="ruby-identifier">render</span>(<span class="ruby-value">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@template</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">options</span>), <span class="ruby-value">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">layout</span>), <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>])
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">render_for_text</span>(<span class="ruby-ivar">@template</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">options</span>), <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>])
      <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:update</span>]
      <span class="ruby-ivar">@template</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:_evaluate_assigns_and_ivars</span>)

      <span class="ruby-identifier">generator</span> = <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span><span class="ruby-operator">::</span><span class="ruby-constant">PrototypeHelper</span><span class="ruby-operator">::</span><span class="ruby-constant">JavaScriptGenerator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@template</span>, &amp;<span class="ruby-identifier">block</span>)
      <span class="ruby-identifier">response</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">JS</span>
      <span class="ruby-identifier">render_for_text</span>(<span class="ruby-identifier">generator</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>])

    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:nothing</span>]
      <span class="ruby-identifier">render_for_text</span>(<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>])

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">render_for_file</span>(<span class="ruby-identifier">default_template</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:status</span>], <span class="ruby-identifier">layout</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-render_to_string">
            
              <b>render_to_string</b>(options = nil, &amp;block)
            
            <a href="../../classes/ActionController/Base.html#method-i-render_to_string" name="method-i-render_to_string" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Renders according to the same rules as <code>render</code>, but returns the
result in a string instead of sending it as the response body to the
browser.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-render_to_string_source')" id="l_method-i-render_to_string_source">show</a>
                
              </p>
              <div id="method-i-render_to_string_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 985</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">render_to_string</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">block</span>) <span class="ruby-comment">#:doc:</span>
  <span class="ruby-identifier">render</span>(<span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>)
<span class="ruby-keyword">ensure</span>
  <span class="ruby-identifier">response</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">erase_render_results</span>
  <span class="ruby-identifier">reset_variables_added_to_assigns</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-reset_session">
            
              <b>reset_session</b>()
            
            <a href="../../classes/ActionController/Base.html#method-i-reset_session" name="method-i-reset_session" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Resets the session by clearing out all the objects stored within and
initializing a new session object.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-reset_session_source')" id="l_method-i-reset_session_source">show</a>
                
              </p>
              <div id="method-i-reset_session_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 1243</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">reset_session</span> <span class="ruby-comment">#:doc:</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">reset_session</span>
  <span class="ruby-ivar">@_session</span> = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">session</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-stale-3F">
            
              <b>stale?</b>(options)
            
            <a href="../../classes/ActionController/Base.html#method-i-stale-3F" name="method-i-stale-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Sets the etag and/or last_modified on the response and checks it against
the client request. If the request doesn&#39;t match the options provided,
the request is considered stale and should be generated from scratch.
Otherwise, it&#39;s fresh and we don&#39;t need to generate anything and a
reply of “304 Not Modified” is sent.</p>

<p>Parameters:</p>
<ul><li>
<p><code>:etag</code></p>
</li><li>
<p><code>:last_modified</code></p>
</li><li>
<p><code>:public</code> By default the Cache-Control header is private, set
this to true if you want your application to be cachable by other devices
(proxy caches).</p>
</li></ul>

<p>Example:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">show</span>
  <span class="ruby-ivar">@article</span> = <span class="ruby-constant">Article</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">id</span>])

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">stale?</span>(:<span class="ruby-identifier">etag</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@article</span>, :<span class="ruby-identifier">last_modified</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@article</span>.<span class="ruby-identifier">created_at</span>.<span class="ruby-identifier">utc</span>)
    <span class="ruby-ivar">@statistics</span> = <span class="ruby-ivar">@article</span>.<span class="ruby-identifier">really_expensive_call</span>
    <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
      <span class="ruby-comment"># all the supported formats</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-stale-3F_source')" id="l_method-i-stale-3F_source">show</a>
                
              </p>
              <div id="method-i-stale-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/base.rb, line 1166</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">stale?</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">fresh_when</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-operator">!</span><span class="ruby-identifier">request</span>.<span class="ruby-identifier">fresh?</span>(<span class="ruby-identifier">response</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    