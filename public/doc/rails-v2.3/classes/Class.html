<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Class</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            Class 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/class/attribute_rb.html">activesupport/lib/active_support/core_ext/class/attribute.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/class/attribute_accessors_rb.html">activesupport/lib/active_support/core_ext/class/attribute_accessors.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/class/delegating_attributes_rb.html">activesupport/lib/active_support/core_ext/class/delegating_attributes.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/class/inheritable_attributes_rb.html">activesupport/lib/active_support/core_ext/class/inheritable_attributes.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/class/removal_rb.html">activesupport/lib/active_support/core_ext/class/removal.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/duplicable_rb.html">activesupport/lib/active_support/core_ext/duplicable.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>Extends the class object with class and instance accessors for class
attributes, just like the native attr* accessors for instance attributes.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">cattr_accessor</span> :<span class="ruby-identifier">hair_colors</span>
<span class="ruby-keyword">end</span>

<span class="ruby-constant">Person</span>.<span class="ruby-identifier">hair_colors</span> = [:<span class="ruby-identifier">brown</span>, :<span class="ruby-identifier">black</span>, :<span class="ruby-identifier">blonde</span>, :<span class="ruby-identifier">red</span>]
</pre>

<p>These class attributes behave something like the class inheritable
accessors.  But instead of copying the hash over at the time the subclass
is first defined,  the accessors simply delegate to their superclass unless
they have been given a  specific value.  This stops the strange situation
where values  set after class definition don&#39;t get applied to
subclasses.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-cattr_accessor">cattr_accessor</a>,
              </li>
            
              
              <li>
                <a href="#method-i-cattr_reader">cattr_reader</a>,
              </li>
            
              
              <li>
                <a href="#method-i-cattr_writer">cattr_writer</a>,
              </li>
            
              
              <li>
                <a href="#method-i-class_attribute">class_attribute</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-superclass_delegating_accessor">superclass_delegating_accessor</a>,
              </li>
            
              
              <li>
                <a href="#method-i-superclass_delegating_reader">superclass_delegating_reader</a>,
              </li>
            
              
              <li>
                <a href="#method-i-superclass_delegating_writer">superclass_delegating_writer</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-cattr_accessor">
            
              <b>cattr_accessor</b>(*syms)
            
            <a href="../classes/Class.html#method-i-cattr_accessor" name="method-i-cattr_accessor" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-cattr_accessor_source')" id="l_method-i-cattr_accessor_source">show</a>
                
              </p>
              <div id="method-i-cattr_accessor_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/class/attribute_accessors.rb, line 57</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">cattr_accessor</span>(*<span class="ruby-identifier">syms</span>)
  <span class="ruby-identifier">cattr_reader</span>(*<span class="ruby-identifier">syms</span>)
  <span class="ruby-identifier">cattr_writer</span>(*<span class="ruby-identifier">syms</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-cattr_reader">
            
              <b>cattr_reader</b>(*syms)
            
            <a href="../classes/Class.html#method-i-cattr_reader" name="method-i-cattr_reader" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-cattr_reader_source')" id="l_method-i-cattr_reader_source">show</a>
                
              </p>
              <div id="method-i-cattr_reader_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/class/attribute_accessors.rb, line 10</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">cattr_reader</span>(*<span class="ruby-identifier">syms</span>)
    <span class="ruby-identifier">options</span> = <span class="ruby-identifier">syms</span>.<span class="ruby-identifier">extract_options!</span>
    <span class="ruby-identifier">syms</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sym</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
      <span class="ruby-identifier">class_eval</span>(<span class="ruby-string">&quot;        unless defined? @@#{sym}
          @@#{sym} = nil
        end

        def self.#{sym}
          @@#{sym}
        end
&quot;</span>, <span class="ruby-keyword">__FILE__</span>, <span class="ruby-keyword">__LINE__</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)

      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:instance_reader</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
        <span class="ruby-identifier">class_eval</span>(<span class="ruby-string">&quot;          def #{sym}
            @@#{sym}
          end
&quot;</span>, <span class="ruby-keyword">__FILE__</span>, <span class="ruby-keyword">__LINE__</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-cattr_writer">
            
              <b>cattr_writer</b>(*syms)
            
            <a href="../classes/Class.html#method-i-cattr_writer" name="method-i-cattr_writer" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-cattr_writer_source')" id="l_method-i-cattr_writer_source">show</a>
                
              </p>
              <div id="method-i-cattr_writer_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/class/attribute_accessors.rb, line 34</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">cattr_writer</span>(*<span class="ruby-identifier">syms</span>)
    <span class="ruby-identifier">options</span> = <span class="ruby-identifier">syms</span>.<span class="ruby-identifier">extract_options!</span>
    <span class="ruby-identifier">syms</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sym</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">class_eval</span>(<span class="ruby-string">&quot;        unless defined? @@#{sym}
          @@#{sym} = nil
        end

        def self.#{sym}=(obj)
          @@#{sym} = obj
        end
&quot;</span>, <span class="ruby-keyword">__FILE__</span>, <span class="ruby-keyword">__LINE__</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)

      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:instance_writer</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
        <span class="ruby-identifier">class_eval</span>(<span class="ruby-string">&quot;          def #{sym}=(obj)
            @@#{sym} = obj
          end
&quot;</span>, <span class="ruby-keyword">__FILE__</span>, <span class="ruby-keyword">__LINE__</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-class_attribute">
            
              <b>class_attribute</b>(*attrs)
            
            <a href="../classes/Class.html#method-i-class_attribute" name="method-i-class_attribute" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Declare a class-level attribute whose value is inheritable and overwritable
by subclasses:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Base</span>
  <span class="ruby-identifier">class_attribute</span> :<span class="ruby-identifier">setting</span>
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">Subclass</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Base</span>
<span class="ruby-keyword">end</span>

<span class="ruby-constant">Base</span>.<span class="ruby-identifier">setting</span> = <span class="ruby-keyword">true</span>
<span class="ruby-constant">Subclass</span>.<span class="ruby-identifier">setting</span>            <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-constant">Subclass</span>.<span class="ruby-identifier">setting</span> = <span class="ruby-keyword">false</span>
<span class="ruby-constant">Subclass</span>.<span class="ruby-identifier">setting</span>            <span class="ruby-comment"># =&gt; false</span>
<span class="ruby-constant">Base</span>.<span class="ruby-identifier">setting</span>                <span class="ruby-comment"># =&gt; true</span>
</pre>

<p>This matches normal Ruby method inheritance: think of writing an attribute
on a subclass as overriding the reader method.</p>

<p>For convenience, a query method is defined as well:</p>

<pre class="ruby"><span class="ruby-constant">Subclass</span>.<span class="ruby-identifier">setting?</span>           <span class="ruby-comment"># =&gt; false</span>
</pre>

<p>Instances may overwrite the class value in the same way:</p>

<pre class="ruby"><span class="ruby-constant">Base</span>.<span class="ruby-identifier">setting</span> = <span class="ruby-keyword">true</span>
<span class="ruby-identifier">object</span> = <span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">object</span>.<span class="ruby-identifier">setting</span>          <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-identifier">object</span>.<span class="ruby-identifier">setting</span> = <span class="ruby-keyword">false</span>
<span class="ruby-identifier">object</span>.<span class="ruby-identifier">setting</span>          <span class="ruby-comment"># =&gt; false</span>
<span class="ruby-constant">Base</span>.<span class="ruby-identifier">setting</span>            <span class="ruby-comment"># =&gt; true</span>
</pre>

<p>To opt out of the instance writer method, pass :instance_writer =&gt;
false.</p>

<pre class="ruby"><span class="ruby-identifier">object</span>.<span class="ruby-identifier">setting</span> = <span class="ruby-keyword">false</span>  <span class="ruby-comment"># =&gt; NoMethodError</span>
</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-class_attribute_source')" id="l_method-i-class_attribute_source">show</a>
                
              </p>
              <div id="method-i-class_attribute_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/class/attribute.rb, line 40</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">class_attribute</span>(*<span class="ruby-identifier">attrs</span>)
    <span class="ruby-identifier">instance_writer</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">pop</span>[<span class="ruby-value">:instance_writer</span>]

    <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">class_eval</span> <span class="ruby-string">&quot;        def self.#{name}() nil end
        def self.#{name}?() !!#{name} end

        def self.#{name}=(val)
          singleton_class.class_eval do
            remove_possible_method(:#{name})
            define_method(:#{name}) { val }
          end
        end

        def #{name}
          defined?(@#{name}) ? @#{name} : singleton_class.#{name}
        end

        def #{name}?
          !!#{name}
        end
&quot;</span>, <span class="ruby-keyword">__FILE__</span>, <span class="ruby-keyword">__LINE__</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>

      <span class="ruby-identifier">attr_writer</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">instance_writer</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-superclass_delegating_accessor">
            
              <b>superclass_delegating_accessor</b>(*names)
            
            <a href="../classes/Class.html#method-i-superclass_delegating_accessor" name="method-i-superclass_delegating_accessor" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-superclass_delegating_accessor_source')" id="l_method-i-superclass_delegating_accessor_source">show</a>
                
              </p>
              <div id="method-i-superclass_delegating_accessor_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/class/delegating_attributes.rb, line 43</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">superclass_delegating_accessor</span>(*<span class="ruby-identifier">names</span>)
  <span class="ruby-identifier">superclass_delegating_reader</span>(*<span class="ruby-identifier">names</span>)
  <span class="ruby-identifier">superclass_delegating_writer</span>(*<span class="ruby-identifier">names</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-superclass_delegating_reader">
            
              <b>superclass_delegating_reader</b>(*names)
            
            <a href="../classes/Class.html#method-i-superclass_delegating_reader" name="method-i-superclass_delegating_reader" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-superclass_delegating_reader_source')" id="l_method-i-superclass_delegating_reader_source">show</a>
                
              </p>
              <div id="method-i-superclass_delegating_reader_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/class/delegating_attributes.rb, line 8</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">superclass_delegating_reader</span>(*<span class="ruby-identifier">names</span>)
  <span class="ruby-identifier">class_name_to_stop_searching_on</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;Object&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">names</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">class_eval</span> <span class="ruby-value">&lt;&lt;-EOS
    def self.#{name}                                            # def self.only_reader
      if defined?(@#{name})                                     #   if defined?(@only_reader)
        @#{name}                                                #     @only_reader
      elsif superclass &lt; #{class_name_to_stop_searching_on} &amp;&amp;  #   elsif superclass &lt; Object &amp;&amp;
            superclass.respond_to?(:#{name})                    #         superclass.respond_to?(:only_reader)
        superclass.#{name}                                      #     superclass.only_reader
      end                                                       #   end
    end                                                         # end
    def #{name}                                                 # def only_reader
      self.class.#{name}                                        #   self.class.only_reader
    end                                                         # end
    def self.#{name}?                                           # def self.only_reader?
      !!#{name}                                                 #   !!only_reader
    end                                                         # end
    def #{name}?                                                # def only_reader?
      !!#{name}                                                 #   !!only_reader
    end                                                         # end
    EOS</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-superclass_delegating_writer">
            
              <b>superclass_delegating_writer</b>(*names)
            
            <a href="../classes/Class.html#method-i-superclass_delegating_writer" name="method-i-superclass_delegating_writer" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-superclass_delegating_writer_source')" id="l_method-i-superclass_delegating_writer_source">show</a>
                
              </p>
              <div id="method-i-superclass_delegating_writer_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/class/delegating_attributes.rb, line 33</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">superclass_delegating_writer</span>(*<span class="ruby-identifier">names</span>)
  <span class="ruby-identifier">names</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">class_eval</span> <span class="ruby-value">&lt;&lt;-EOS
      def self.#{name}=(value)  # def self.only_writer=(value)
        @#{name} = value        #   @only_writer = value
      end                       # end
    EOS</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    