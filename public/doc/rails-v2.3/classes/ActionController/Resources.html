<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ActionController::Resources</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Module</span> 
            ActionController::Resources 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/actionpack/lib/action_controller/resources_rb.html">actionpack/lib/action_controller/resources.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h2 id="label-Overview">Overview</h2>

<p><a href="Resources.html">ActionController::Resources</a> are a way of
defining RESTful resources.  A RESTful resource, in basic terms, is
something that can be pointed at and it will respond with a representation
of the data requested. In real terms this could mean a user with a browser
requests an <a href="../HTML.html">HTML</a> page, or that a desktop
application requests XML data.</p>

<p>RESTful design is based on the assumption that there are four generic verbs
that a user of an application can request from a resource (the noun).</p>

<p>Resources can be requested using four basic HTTP verbs (GET, POST, PUT,
DELETE), the method used denotes the type of action that should take place.</p>

<h3 id="label-The+Different+Methods+and+their+Usage">The Different Methods and their Usage</h3>
<ul><li>
<p>GET    - Requests for a resource, no saving or editing of a resource should
occur in a GET request.</p>
</li><li>
<p>POST   - Creation of resources.</p>
</li><li>
<p>PUT    - Editing of attributes on a resource.</p>
</li><li>
<p>DELETE - Deletion of a resource.</p>
</li></ul>

<h3 id="label-Examples">Examples</h3>

<pre class="ruby"><span class="ruby-comment"># A GET request on the Posts resource is asking for all Posts</span>
<span class="ruby-constant">GET</span> <span class="ruby-node">/posts

# A GET request on a single Post resource is asking for that particular Post
GET /</span><span class="ruby-identifier">posts</span><span class="ruby-operator">/</span><span class="ruby-value">1</span>

<span class="ruby-comment"># A POST request on the Posts resource is asking for a Post to be created with the supplied details</span>
<span class="ruby-constant">POST</span> <span class="ruby-node">/posts # with =&gt; { :post =&gt; { :title =&gt; &quot;My Whizzy New Post&quot;, :body =&gt; &quot;I&#39;ve got a brand new combine harvester&quot; } }

# A PUT request on a single Post resource is asking for a Post to be updated
PUT /</span><span class="ruby-identifier">posts</span> <span class="ruby-comment"># with =&gt; { :id =&gt; 1, :post =&gt; { :title =&gt; &quot;Changed Whizzy Title&quot; } }</span>

<span class="ruby-comment"># A DELETE request on a single Post resource is asking for it to be deleted</span>
<span class="ruby-constant">DELETE</span> <span class="ruby-node">/posts # with =&gt; { :id =&gt; 1 }
</span></pre>

<p>By using the REST convention, users of our application can assume certain
things about how the data is requested and how it is returned.  <a
href="../Rails.html">Rails</a> simplifies the routing part of RESTful
design by supplying you with methods to create them in your routes.rb file.</p>

<p>Read more about REST at <a
href="http://en.wikipedia.org/wiki/Representational_State_Transfer">en.wikipedia.org/wiki/Representational_State_Transfer</a></p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-resource">resource</a>,
              </li>
            
              
              <li>
                <a href="#method-i-resources">resources</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">INHERITABLE_OPTIONS</td>
            <td>=</td>
            <td class="attr-value">:namespace, :shallow</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-resource">
            
              <b>resource</b>(*entities, &amp;block)
            
            <a href="../../classes/ActionController/Resources.html#method-i-resource" name="method-i-resource" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Creates named routes for implementing verb-oriented controllers for a
singleton resource. A singleton resource is global to its current context. 
For unnested singleton resources, the resource is global to the current
user visiting the application, such as a user&#39;s <code>/account</code>
profile.  For nested singleton resources, the resource is global to its
parent resource, such as a <code>projects</code> resource that
<code>has_one :project_manager</code>. The <code>project_manager</code>
should be mapped as a singleton resource under <code>projects</code>:</p>

<pre class="ruby"><span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">projects</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">project</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">resource</span> :<span class="ruby-identifier">project_manager</span>
<span class="ruby-keyword">end</span>
</pre>

<p>See <code>resources</code> for general conventions.  These are the main
differences:</p>
<ul><li>
<p>A singular name is given to <code>map.resource</code>.  The default
controller name is still taken from the plural name.</p>
</li><li>
<p>To specify a custom plural name, use the <code>:plural</code> option. 
There is no <code>:singular</code> option.</p>
</li><li>
<p>No default index route is created for the singleton resource controller.</p>
</li><li>
<p>When nesting singleton resources, only the singular name is used as the
path prefix (example: &#39;account/messages/1&#39;)</p>
</li></ul>

<p>For example:</p>

<pre>map.resource :account</pre>

<p>maps these actions in the Accounts controller:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">AccountsController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-comment"># GET new_account_url</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">new</span>
    <span class="ruby-comment"># return an HTML form for describing the new account</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># POST account_url</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>
    <span class="ruby-comment"># create an account</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># GET account_url</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">show</span>
    <span class="ruby-comment"># find and return the account</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># GET edit_account_url</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">edit</span>
    <span class="ruby-comment"># return an HTML form for editing the account</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># PUT account_url</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">update</span>
    <span class="ruby-comment"># find and update the account</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># DELETE account_url</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">destroy</span>
    <span class="ruby-comment"># delete the account</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Along with the routes themselves, <code>resource</code> generates named
routes for use in controllers and views. <code>map.resource :account</code>
produces these named routes and helpers:</p>

<pre>Named Route   Helpers
============  =============================================
account       account_url, hash_for_account_url,
              account_path, hash_for_account_path

new_account   new_account_url, hash_for_new_account_url,
              new_account_path, hash_for_new_account_path

edit_account  edit_account_url, hash_for_edit_account_url,
              edit_account_path, hash_for_edit_account_path</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-resource_source')" id="l_method-i-resource_source">show</a>
                
              </p>
              <div id="method-i-resource_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/resources.rb, line 519</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">resource</span>(*<span class="ruby-identifier">entities</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">entities</span>.<span class="ruby-identifier">extract_options!</span>
  <span class="ruby-identifier">entities</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">entity</span><span class="ruby-operator">|</span> <span class="ruby-identifier">map_singleton_resource</span>(<span class="ruby-identifier">entity</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>, &amp;<span class="ruby-identifier">block</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-resources">
            
              <b>resources</b>(*entities, &amp;block)
            
            <a href="../../classes/ActionController/Resources.html#method-i-resources" name="method-i-resources" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Creates named routes for implementing verb-oriented controllers for a
collection resource.</p>

<p>For example:</p>

<pre>map.resources :messages</pre>

<p>will map the following actions in the corresponding controller:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">MessagesController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-comment"># GET messages_url</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">index</span>
    <span class="ruby-comment"># return all messages</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># GET new_message_url</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">new</span>
    <span class="ruby-comment"># return an HTML form for describing a new message</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># POST messages_url</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>
    <span class="ruby-comment"># create a new message</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># GET message_url(:id =&gt; 1)</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">show</span>
    <span class="ruby-comment"># find and return a specific message</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># GET edit_message_url(:id =&gt; 1)</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">edit</span>
    <span class="ruby-comment"># return an HTML form for editing a specific message</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># PUT message_url(:id =&gt; 1)</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">update</span>
    <span class="ruby-comment"># find and update a specific message</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># DELETE message_url(:id =&gt; 1)</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">destroy</span>
    <span class="ruby-comment"># delete a specific message</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Along with the routes themselves, <code>resources</code> generates named
routes for use in controllers and views. <code>map.resources
:messages</code> produces the following named routes and helpers:</p>

<pre>Named Route   Helpers
============  =====================================================
messages      messages_url, hash_for_messages_url,
              messages_path, hash_for_messages_path

message       message_url(id), hash_for_message_url(id),
              message_path(id), hash_for_message_path(id)

new_message   new_message_url, hash_for_new_message_url,
              new_message_path, hash_for_new_message_path

edit_message  edit_message_url(id), hash_for_edit_message_url(id),
              edit_message_path(id), hash_for_edit_message_path(id)</pre>

<p>You can use these helpers instead of <code>url_for</code> or methods that
take <code>url_for</code> parameters. For example:</p>

<pre>redirect_to :controller =&gt; &#39;messages&#39;, :action =&gt; &#39;index&#39;
# and
&lt;%= link_to &quot;edit this message&quot;, :controller =&gt; &#39;messages&#39;, :action =&gt; &#39;edit&#39;, :id =&gt; @message.id %&gt;</pre>

<p>now become:</p>

<pre>redirect_to messages_url
# and
&lt;%= link_to &quot;edit this message&quot;, edit_message_url(@message) # calls @message.id automatically</pre>

<p>Since web browsers don&#39;t support the PUT and DELETE verbs, you will
need to add a parameter &#39;_method&#39; to your form tags. The form
helpers make this a little easier. For an update form with a
<code>@message</code> object:</p>

<pre>&lt;%= form_tag message_path(@message), :method =&gt; :put %&gt;</pre>

<p>or</p>

<pre>&lt;% form_for :message, @message, :url =&gt; message_path(@message), :html =&gt; {:method =&gt; :put} do |f| %&gt;</pre>

<p>or</p>

<pre>&lt;% form_for @message do |f| %&gt;</pre>

<p>which takes into account whether <code>@message</code> is a new record or
not and generates the path and method accordingly.</p>

<p>The <code>resources</code> method accepts the following options to
customize the resulting routes:</p>
<ul><li>
<p><code>:collection</code> - Add named routes for other actions that operate
on the collection. Takes a hash of <code>#{action} =&gt; #{method}</code>,
where method is
<code>:get</code>/<code>:post</code>/<code>:put</code>/<code>:delete</code>,
an array of any of the previous, or <code>:any</code> if the method does
not matter. These routes map to a URL like /messages/rss, with a route of
<code>rss_messages_url</code>.</p>
</li><li>
<p><code>:member</code> - Same as <code>:collection</code>, but for actions
that operate on a specific member.</p>
</li><li>
<p><code>:new</code> - Same as <code>:collection</code>, but for actions that
operate on the new resource action.</p>
</li><li>
<p><code>:controller</code> - Specify the controller name for the routes.</p>
</li><li>
<p><code>:singular</code> - Specify the singular name used in the member
routes.</p>
</li><li>
<p><code>:requirements</code> - Set custom routing parameter requirements;
this is a hash of either</p>

<pre class="ruby"><span class="ruby-identifier">regular</span> <span class="ruby-identifier">expressions</span> (<span class="ruby-identifier">which</span> <span class="ruby-identifier">must</span> <span class="ruby-identifier">match</span> <span class="ruby-keyword">for</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">route</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">match</span>) <span class="ruby-keyword">or</span> <span class="ruby-identifier">extra</span> <span class="ruby-identifier">parameters</span>. <span class="ruby-constant">For</span> <span class="ruby-identifier">example</span><span class="ruby-operator">:</span>

  <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resource</span> :<span class="ruby-identifier">profile</span>, :<span class="ruby-identifier">path_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;:name&#39;</span>, :<span class="ruby-identifier">requirements</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/[a-zA-Z]+/</span>, :<span class="ruby-identifier">extra</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;value&#39;</span> }

<span class="ruby-identifier">will</span> <span class="ruby-identifier">only</span> <span class="ruby-identifier">match</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">first</span> <span class="ruby-identifier">part</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">alphabetic</span>, <span class="ruby-keyword">and</span> <span class="ruby-identifier">will</span> <span class="ruby-identifier">pass</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">parameter</span> :<span class="ruby-identifier">extra</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">controller</span>.
</pre>
</li><li>
<p><code>:conditions</code> - Specify custom routing recognition conditions. 
Resources sets the <code>:method</code> value for the method-specific
routes.</p>
</li><li>
<p><code>:as</code> - Specify a different resource name to use in the URL
path. For example:</p>

<pre class="ruby"><span class="ruby-comment"># products_path == &#39;/productos&#39;</span>
<span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">products</span>, :<span class="ruby-identifier">as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;productos&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">product</span><span class="ruby-operator">|</span>
  <span class="ruby-comment"># product_reviews_path(product) == &#39;/productos/1234/comentarios&#39;</span>
  <span class="ruby-identifier">product</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">product_reviews</span>, :<span class="ruby-identifier">as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;comentarios&#39;</span>
<span class="ruby-keyword">end</span>
</pre>
</li><li>
<p><code>:has_one</code> - Specify nested resources, this is a shorthand for
mapping singleton resources beneath the current.</p>
</li><li>
<p><code>:has_many</code> - Same has <code>:has_one</code>, but for plural
resources.</p>

<p>You may directly specify the routing association with <code>has_one</code>
and <code>has_many</code> like:</p>

<pre class="ruby"><span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">notes</span>, :<span class="ruby-identifier">has_one</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">author</span>, :<span class="ruby-identifier">has_many</span> =<span class="ruby-operator">&gt;</span> [:<span class="ruby-identifier">comments</span>, :<span class="ruby-identifier">attachments</span>]
</pre>

<p>This is the same as:</p>

<pre class="ruby"><span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">notes</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">notes</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">notes</span>.<span class="ruby-identifier">resource</span>  :<span class="ruby-identifier">author</span>
  <span class="ruby-identifier">notes</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">comments</span>
  <span class="ruby-identifier">notes</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">attachments</span>
<span class="ruby-keyword">end</span>
</pre>
</li><li>
<p><code>:path_names</code> - Specify different path names for the actions.
For example:</p>

<pre class="ruby"><span class="ruby-comment"># new_products_path == &#39;/productos/nuevo&#39;</span>
<span class="ruby-comment"># bids_product_path(1) == &#39;/productos/1/licitacoes&#39;</span>
<span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">products</span>, :<span class="ruby-identifier">as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;productos&#39;</span>, :<span class="ruby-identifier">member</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">bids</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">get</span> }, :<span class="ruby-identifier">path_names</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;nuevo&#39;</span>, :<span class="ruby-identifier">bids</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;licitacoes&#39;</span> }
</pre>

<p>You can also set default action names from an environment, like this:</p>

<pre class="ruby"><span class="ruby-identifier">config</span>.<span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">resources_path_names</span> = { :<span class="ruby-identifier">new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;nuevo&#39;</span>, :<span class="ruby-identifier">edit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;editar&#39;</span> }
</pre>
</li><li>
<p><code>:path_prefix</code> - Set a prefix to the routes with required route
variables.</p>

<p>Weblog comments usually belong to a post, so you might use
<code>resources</code> like:</p>

<pre class="ruby"><span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">articles</span>
<span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">comments</span>, :<span class="ruby-identifier">path_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;/articles/:article_id&#39;</span>
</pre>

<p>You can nest <code>resources</code> calls to set this automatically:</p>

<pre class="ruby"><span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">articles</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">article</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">article</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">comments</span>
<span class="ruby-keyword">end</span>
</pre>

<p>The comment resources work the same, but must now include a value for
<code>:article_id</code>.</p>

<pre class="ruby"><span class="ruby-identifier">article_comments_url</span>(<span class="ruby-ivar">@article</span>)
<span class="ruby-identifier">article_comment_url</span>(<span class="ruby-ivar">@article</span>, <span class="ruby-ivar">@comment</span>)

<span class="ruby-identifier">article_comments_url</span>(:<span class="ruby-identifier">article_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@article</span>)
<span class="ruby-identifier">article_comment_url</span>(:<span class="ruby-identifier">article_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@article</span>, :<span class="ruby-identifier">id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@comment</span>)
</pre>

<p>If you don&#39;t want to load all objects from the database you might want
to use the <code>article_id</code> directly:</p>

<pre>articles_comments_url(@comment.article_id, @comment)</pre>
</li><li>
<p><code>:name_prefix</code> - Define a prefix for all generated routes,
usually ending in an underscore. Use this if you have named routes that may
clash.</p>

<pre class="ruby"><span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">tags</span>, :<span class="ruby-identifier">path_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;/books/:book_id&#39;</span>, :<span class="ruby-identifier">name_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;book_&#39;</span>
<span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">tags</span>, :<span class="ruby-identifier">path_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;/toys/:toy_id&#39;</span>,   :<span class="ruby-identifier">name_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;toy_&#39;</span>
</pre>
</li></ul>

<p>You may also use <code>:name_prefix</code> to override the generic named
routes in a nested resource:</p>

<pre class="ruby"><span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">articles</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">article</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">article</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">comments</span>, :<span class="ruby-identifier">name_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span>
</pre>

<p>This will yield named resources like so:</p>

<pre>comments_url(@article)
comment_url(@article, @comment)</pre>
<ul><li>
<p><code>:shallow</code> - If true, paths for nested resources which reference
a specific member (ie. those with an :id parameter) will not use the parent
path prefix or name prefix.</p>
</li></ul>

<p>The <code>:shallow</code> option is inherited by any nested resource(s).</p>

<p>For example, &#39;users&#39;, &#39;posts&#39; and &#39;comments&#39; all
use shallow paths with the following nested resources:</p>

<pre class="ruby"><span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">users</span>, :<span class="ruby-identifier">shallow</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">user</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">user</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">posts</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">post</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">post</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">comments</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
<span class="ruby-comment"># --&gt; GET /users/1/posts (maps to the PostsController#index action as usual)</span>
<span class="ruby-comment">#     also adds the usual named route called &quot;user_posts&quot;</span>
<span class="ruby-comment"># --&gt; GET /posts/2 (maps to the PostsController#show action as if it were not nested)</span>
<span class="ruby-comment">#     also adds the named route called &quot;post&quot;</span>
<span class="ruby-comment"># --&gt; GET /posts/2/comments (maps to the CommentsController#index action)</span>
<span class="ruby-comment">#     also adds the named route called &quot;post_comments&quot;</span>
<span class="ruby-comment"># --&gt; GET /comments/2 (maps to the CommentsController#show action as if it were not nested)</span>
<span class="ruby-comment">#     also adds the named route called &quot;comment&quot;</span>
</pre>

<p>You may also use <code>:shallow</code> in combination with the
<code>has_one</code> and <code>has_many</code> shorthand notations like:</p>

<pre class="ruby"><span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">users</span>, :<span class="ruby-identifier">has_many</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">posts</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">comments</span> }, :<span class="ruby-identifier">shallow</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>
</pre>
<ul><li>
<p><code>:only</code> and <code>:except</code> - Specify which of the seven
default actions should be routed to.</p>
</li></ul>

<p><code>:only</code> and <code>:except</code> may be set to
<code>:all</code>, <code>:none</code>, an action name or a list of action
names. By default, routes are generated for all seven actions.</p>

<p>For example:</p>

<pre class="ruby"><span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">posts</span>, :<span class="ruby-identifier">only</span> =<span class="ruby-operator">&gt;</span> [:<span class="ruby-identifier">index</span>, :<span class="ruby-identifier">show</span>] <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">post</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">post</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">comments</span>, :<span class="ruby-identifier">except</span> =<span class="ruby-operator">&gt;</span> [:<span class="ruby-identifier">update</span>, :<span class="ruby-identifier">destroy</span>]
<span class="ruby-keyword">end</span>
<span class="ruby-comment"># --&gt; GET /posts (maps to the PostsController#index action)</span>
<span class="ruby-comment"># --&gt; POST /posts (fails)</span>
<span class="ruby-comment"># --&gt; GET /posts/1 (maps to the PostsController#show action)</span>
<span class="ruby-comment"># --&gt; DELETE /posts/1 (fails)</span>
<span class="ruby-comment"># --&gt; POST /posts/1/comments (maps to the CommentsController#create action)</span>
<span class="ruby-comment"># --&gt; PUT /posts/1/comments/1 (fails)</span>
</pre>

<p>If <code>map.resources</code> is called with multiple resources, they all
get the same options applied.</p>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">messages</span>, :<span class="ruby-identifier">path_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;/thread/:thread_id&quot;</span>
<span class="ruby-comment"># --&gt; GET /thread/7/messages/1</span>

<span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">messages</span>, :<span class="ruby-identifier">collection</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">rss</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">get</span> }
<span class="ruby-comment"># --&gt; GET /messages/rss (maps to the #rss action)</span>
<span class="ruby-comment">#     also adds a named route called &quot;rss_messages&quot;</span>

<span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">messages</span>, :<span class="ruby-identifier">member</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">mark</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">post</span> }
<span class="ruby-comment"># --&gt; POST /messages/1/mark (maps to the #mark action)</span>
<span class="ruby-comment">#     also adds a named route called &quot;mark_message&quot;</span>

<span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">messages</span>, :<span class="ruby-identifier">new</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">preview</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">post</span> }
<span class="ruby-comment"># --&gt; POST /messages/new/preview (maps to the #preview action)</span>
<span class="ruby-comment">#     also adds a named route called &quot;preview_new_message&quot;</span>

<span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">messages</span>, :<span class="ruby-identifier">new</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">new</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">any</span>, :<span class="ruby-identifier">preview</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">post</span> }
<span class="ruby-comment"># --&gt; POST /messages/new/preview (maps to the #preview action)</span>
<span class="ruby-comment">#     also adds a named route called &quot;preview_new_message&quot;</span>
<span class="ruby-comment"># --&gt; /messages/new can be invoked via any request method</span>

<span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> :<span class="ruby-identifier">messages</span>, :<span class="ruby-identifier">controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;categories&quot;</span>,
      :<span class="ruby-identifier">path_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;/category/:category_id&quot;</span>,
      :<span class="ruby-identifier">name_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;category_&quot;</span>
<span class="ruby-comment"># --&gt; GET /categories/7/messages/1</span>
<span class="ruby-comment">#     has named route &quot;category_message&quot;</span>
</pre>

<p>The <code>resources</code> method sets HTTP method restrictions on the
routes it generates. For example, making an HTTP POST on
<code>new_message_url</code> will raise a RoutingError exception. The
default route in <code>config/routes.rb</code> overrides this and allows
invalid HTTP methods for resource routes.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-resources_source')" id="l_method-i-resources_source">show</a>
                
              </p>
              <div id="method-i-resources_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_controller/resources.rb, line 445</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">resources</span>(*<span class="ruby-identifier">entities</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">entities</span>.<span class="ruby-identifier">extract_options!</span>
  <span class="ruby-identifier">entities</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">entity</span><span class="ruby-operator">|</span> <span class="ruby-identifier">map_resource</span>(<span class="ruby-identifier">entity</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>, &amp;<span class="ruby-identifier">block</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    