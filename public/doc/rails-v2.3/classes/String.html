<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>String</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            String 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/object/blank_rb.html">activesupport/lib/active_support/core_ext/object/blank.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/string_rb.html">activesupport/lib/active_support/core_ext/string.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/string/bytesize_rb.html">activesupport/lib/active_support/core_ext/string/bytesize.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/string/output_safety_rb.html">activesupport/lib/active_support/core_ext/string/output_safety.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/string/xchar_rb.html">activesupport/lib/active_support/core_ext/string/xchar.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/json/encoders/string_rb.html">activesupport/lib/active_support/json/encoders/string.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/vendor/builder-2_1_2/builder/xchar_rb.html">activesupport/lib/active_support/vendor/builder-2.1.2/builder/xchar.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/vendor/i18n-0_4_1/i18n/core_ext/string/interpolate_rb.html">activesupport/lib/active_support/vendor/i18n-0.4.1/i18n/core_ext/string/interpolate.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>Enhance the <a href="String.html">String</a> class with a XML escaped
character version of to_s.</p>

<p>Extension for <a href="String.html">String</a> class. This feature is
included in Ruby 1.9 or later but not occur TypeError.</p>

<p><a href="String.html#method-i-25">#%</a> method which accept “named
argument”. The translator can know the meaning of the msgids using “named
argument” instead of %s/%d style.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>#</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-25">%</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-as_str">as_str</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-html_safe">html_safe</a>,
              </li>
            
              
              <li>
                <a href="#method-i-html_safe-3F">html_safe?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-interpolate_without_ruby_19_syntax">interpolate_without_ruby_19_syntax</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>O</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-original_xs">original_xs</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-to_xs">to_xs</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">INTERPOLATION_PATTERN</td>
            <td>=</td>
            <td class="attr-value">Regexp.union(
/%\{(\w+)\}/,                               # matches placeholders like &quot;%{foo}&quot;
/%&lt;(\w+)&gt;(.*?\d*\.?\d*[bBdiouxXeEfgGcps])/  # matches placeholders like &quot;%&lt;foo&gt;.d&quot;
)</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">INTERPOLATION_PATTERN_WITH_ESCAPE</td>
            <td>=</td>
            <td class="attr-value">Regexp.union(
/%%/,
INTERPOLATION_PATTERN
)</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-25">
            
              <b>%</b>(args)
            
            <a href="../classes/String.html#method-i-25" name="method-i-25" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>% uses self (i.e. the <a href="String.html">String</a>) as a format
specification and returns the result of applying it to the given arguments.
In other words it interpolates the given arguments to the string according
to the formats the string defines.</p>

<p>There are three ways to use it:</p>
<ul><li>
<p>Using a single argument or Array of arguments.</p>

<p>This is the default behaviour of the <a href="String.html">String</a>
class. See Kernel#sprintf for more details about the format string.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-string">&quot;%d %s&quot;</span> <span class="ruby-operator">%</span> [<span class="ruby-value">1</span>, <span class="ruby-string">&quot;message&quot;</span>]
<span class="ruby-comment"># =&gt; &quot;1 message&quot;</span>
</pre>
</li><li>
<p>Using a <a href="Hash.html">Hash</a> as an argument and unformatted, named
placeholders.</p>

<p>When you pass a <a href="Hash.html">Hash</a> as an argument and specify
placeholders with %{foo} it will interpret the hash values as named
arguments.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-string">&quot;%{firstname}, %{lastname}&quot;</span> <span class="ruby-operator">%</span> {:<span class="ruby-identifier">firstname</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Masao&quot;</span>, :<span class="ruby-identifier">lastname</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Mutoh&quot;</span>}
<span class="ruby-comment"># =&gt; &quot;Masao Mutoh&quot;</span>
</pre>
</li><li>
<p>Using a <a href="Hash.html">Hash</a> as an argument and formatted, named
placeholders.</p>

<p>When you pass a <a href="Hash.html">Hash</a> as an argument and specify
placeholders with %&lt;foo&gt;d it will interpret the hash values as named
arguments and format the value according to the formatting instruction
appended to the closing &gt;.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-string">&quot;%&lt;integer&gt;d, %&lt;float&gt;.1f&quot;</span> <span class="ruby-operator">%</span> { :<span class="ruby-identifier">integer</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>, :<span class="ruby-identifier">float</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">43.4</span> }
<span class="ruby-comment"># =&gt; &quot;10, 43.3&quot;</span>
</pre>
</li></ul>
            </div>
          
          
          
            <div class="aka">
              Also aliased as: <a href="String.html#method-i-interpolate_without_ruby_19_syntax">interpolate_without_ruby_19_syntax</a>
            </div>
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-25_source')" id="l_method-i-25_source">show</a>
                
              </p>
              <div id="method-i-25_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/vendor/i18n-0.4.1/i18n/core_ext/string/interpolate.rb, line 78</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">%</span>(<span class="ruby-keyword ruby-title">args</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>)
    <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-constant">INTERPOLATION_PATTERN_WITH_ESCAPE</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">match</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">match</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;%%&#39;</span>
        <span class="ruby-string">&#39;%&#39;</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">key</span> = (<span class="ruby-node">$1</span> <span class="ruby-operator">||</span> <span class="ruby-node">$2</span>).<span class="ruby-identifier">to_sym</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">KeyError</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>)
        <span class="ruby-node">$3</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-node">&quot;%#{$3}&quot;</span>, <span class="ruby-identifier">args</span>[<span class="ruby-identifier">key</span>]) <span class="ruby-operator">:</span> <span class="ruby-identifier">args</span>[<span class="ruby-identifier">key</span>]
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-keyword">self</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">INTERPOLATION_PATTERN</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;one hash required&#39;</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/%([{&lt;])/</span>, <span class="ruby-string">&#39;%%\1&#39;</span>)
    <span class="ruby-identifier">result</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:&#39;interpolate_without_ruby_19_syntax&#39;</span>, <span class="ruby-identifier">args</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-as_str">
            
              <b>as_str</b>()
            
            <a href="../classes/String.html#method-i-as_str" name="method-i-as_str" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-as_str_source')" id="l_method-i-as_str_source">show</a>
                
              </p>
              <div id="method-i-as_str_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 90</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">as_str</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-html_safe">
            
              <b>html_safe</b>()
            
            <a href="../classes/String.html#method-i-html_safe" name="method-i-html_safe" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-html_safe_source')" id="l_method-i-html_safe_source">show</a>
                
              </p>
              <div id="method-i-html_safe_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 94</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">html_safe</span>
  <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">SafeBuffer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-html_safe-3F">
            
              <b>html_safe?</b>()
            
            <a href="../classes/String.html#method-i-html_safe-3F" name="method-i-html_safe-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-html_safe-3F_source')" id="l_method-i-html_safe-3F_source">show</a>
                
              </p>
              <div id="method-i-html_safe-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">html_safe?</span>
  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-interpolate_without_ruby_19_syntax">
            
              <b>interpolate_without_ruby_19_syntax</b>(args)
            
            <a href="../classes/String.html#method-i-interpolate_without_ruby_19_syntax" name="method-i-interpolate_without_ruby_19_syntax" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-original_xs">
            
              <b>original_xs</b>()
            
            <a href="../classes/String.html#method-i-original_xs" name="method-i-original_xs" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_xs">
            
              <b>to_xs</b>()
            
            <a href="../classes/String.html#method-i-to_xs" name="method-i-to_xs" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>XML escaped version of to_s</p>
            </div>
          
          
          
            <div class="aka">
              Also aliased as: <a href="String.html#method-i-original_xs">original_xs</a>
            </div>
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_xs_source')" id="l_method-i-to_xs_source">show</a>
                
              </p>
              <div id="method-i-to_xs_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/lib/active_support/vendor/builder-2.1.2/builder/xchar.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">to_xs</span>
  <span class="ruby-identifier">unpack</span>(<span class="ruby-string">&#39;U*&#39;</span>).<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">xchr</span>}.<span class="ruby-identifier">join</span> <span class="ruby-comment"># ASCII, UTF-8</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-identifier">unpack</span>(<span class="ruby-string">&#39;C*&#39;</span>).<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">xchr</span>}.<span class="ruby-identifier">join</span> <span class="ruby-comment"># ISO-8859-1, WIN-1252</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    